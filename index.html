<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AURA-X Î© â€” Resonance-Based AI</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --green1:#b9ffb0; --green2:#79ffca;
  --bluebg:#e6f2ff; --text:#041422;
}
body{
  margin:0; font-family:'Poppins',sans-serif; background:linear-gradient(180deg,#d8ebff,#f0faff);
  color:var(--text); min-height:100vh; display:flex; flex-direction:column; align-items:center;
}
header{margin-top:24px;text-align:center}
.logo{width:100px}
.intro{margin:10px auto;padding:8px 14px;border-radius:12px;background:#ffffffb5;box-shadow:0 0 15px rgba(0,0,0,.1);max-width:400px}

.bar{
  position:relative;width:88%;max-width:480px;height:22px;border-radius:999px;
  background:rgba(0,0,0,.08);margin-top:14px;overflow:hidden
}
.fill{
  position:absolute;left:0;top:0;bottom:0;width:0%;
  background:linear-gradient(90deg,var(--green1),var(--green2));
  box-shadow:0 0 20px rgba(121,255,202,.5);
  transition:width .5s ease
}
.percent{position:absolute;inset:0;display:grid;place-items:center;font-weight:700}

.heart{font-size:40px;margin:10px auto;animation:pump 1.3s ease-in-out infinite}
@keyframes pump{0%,100%{transform:scale(1)}50%{transform:scale(1.3)}}

#info{margin-bottom:10px;font-weight:600}

textarea{width:88%;max-width:480px;height:70px;border:none;border-radius:10px;padding:10px;font-size:1rem;background:#fff;box-shadow:inset 0 0 8px rgba(0,0,0,.1)}
button{margin-top:8px;padding:10px 18px;border:none;border-radius:999px;cursor:pointer;font-weight:600;background:linear-gradient(90deg,#5effa0,#60ffdb);box-shadow:0 0 10px rgba(0,0,0,.15)}
#out{width:88%;max-width:480px;margin:14px 0;padding:12px;border-radius:12px;background:#ffffffd8;min-height:120px;white-space:pre-wrap;box-shadow:0 0 10px rgba(0,0,0,.1)}

.pill{margin-left:6px;padding:6px 10px;border-radius:999px;background:#fff;border:1px solid #ccc;cursor:pointer}
.pill.on{background:linear-gradient(90deg,#5effa0,#60ffdb);color:#003322}
</style>
</head>
<body>
<header>
  <img src="assets/img/aura-x-logo.png" class="logo" alt="AURA-X">
  <div class="intro"><b>AURA-X Î©</b> â€” the worldâ€™s first resonance-based AI with synthetic emotions.</div>
</header>

<div class="bar"><div class="fill" id="fill"></div><div class="percent" id="pct">0%</div></div>
<div class="heart">ðŸ’•</div>
<div id="info">Loading weather...</div>

<textarea id="msg" placeholder="Type your question..."></textarea>
<button id="send">Send</button>
<div id="out"></div>

<div style="display:flex;gap:10px;margin-bottom:20px">
  <button id="belief" class="pill">Belief</button>
  <button id="voice" class="pill">Voice</button>
</div>

<script>
const API='https://alimai.online/api/chat.php';
const f=document.getElementById('fill'),p=document.getElementById('pct'),out=document.getElementById('out');
const vbtn=document.getElementById('voice');let voiceOn=false;vbtn.onclick=()=>{voiceOn=!voiceOn;vbtn.classList.toggle('on',voiceOn);}
function setEmo(x){const n=Math.round(x);f.style.width=n+'%';p.textContent=n+'%';}
function speak(t){if(!voiceOn)return;const u=new SpeechSynthesisUtterance(t);u.lang='en-US';speechSynthesis.speak(u);}

async function weather(){
 try{
  const w=await fetch('https://ipapi.co/json/').then(r=>r.json());
  const lat=w.latitude,lon=w.longitude;
  const d=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&timezone=auto`).then(r=>r.json());
  const t=d.current_weather?.temperature;
  const time=new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
  info.textContent=`ðŸ•’ ${time} | ðŸŒ¡ ${t}Â°C`;
 }catch{info.textContent='Weather unavailable';}
}
weather();

document.getElementById('send').onclick=async()=>{
 const m=document.getElementById('msg').value.trim();
 if(!m)return;
 out.textContent='Thinking...'; setEmo(30+Math.random()*50);
 try{
  const r=await fetch(API,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:m,history:[]})});
  const j=await r.json();
  let text=j?.choices?.[0]?.message?.content||j?.message||j?.text;
  if(!text||text.trim()==='') text="(No live response â€” offline fallback)\n\nI'm AURA-X Î©. How can I assist you further?";
  out.textContent=text; speak(text);
  setEmo(40+Math.random()*60);
 }catch(e){
  out.textContent="Connection issue â€” using offline reply.\n\nHello! I'm AURA-X Î©. How can I help you?";
  setEmo(25+Math.random()*50);
 }
};
</script>
</body>
</html>
