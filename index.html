<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>AURA-X Î© â€” synthetic emotions</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#eaf6ff;            /* light blue background */
    --card:#ffffff;
    --text:#0f172a;
    --muted:#667085;
    --accent:#36d399;        /* send/voice pills */
    --pill:#f1f5f9;
    --bar:#dfe3ea;           /* light-gray emotion bar */
    --barFill:#b0c4de;       /* light bluish fill */
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;background:var(--bg);
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:var(--text);
    -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  }
  .wrap{
    min-height:100%;
    display:flex;flex-direction:column;
  }
  header{
    padding:18px 16px 8px; text-align:center;
  }
  header img{height:34px; object-fit:contain}
  .tag{
    margin:10px auto 14px; max-width:720px;
    background:var(--card); color:var(--text);
    padding:12px 14px; border-radius:14px;
    font-weight:800; line-height:1.25; box-shadow:0 6px 20px rgba(15,23,42,.08);
  }
  .topRow{display:flex; align-items:center; gap:10px; justify-content:center; padding:0 14px}
  .bar{
    position:relative; height:18px; border-radius:999px;
    width:min(720px,92vw); background:var(--bar); overflow:hidden;
    box-shadow:inset 0 0 0 1px rgba(15,23,42,.05);
  }
  .fill{
    position:absolute; inset:0;
    width:90%; background:linear-gradient(90deg,var(--barFill),#a2d2ff);
    border-radius:inherit; transition:width .6s ease;
  }
  .bel-voice{display:flex; gap:10px}
  .chip{
    border:none; background:var(--pill); color:var(--text);
    padding:10px 14px; border-radius:999px; font-weight:600
  }
  .heart{
    font-size:46px; text-align:center; margin:16px 0 6px;
    animation:beat 1.25s infinite;
  }
  @keyframes beat{
    0%,100%{transform:scale(1)}
    30%{transform:scale(1.22)}
    60%{transform:scale(0.96)}
  }
  .clockWx{color:var(--muted); text-align:center; font-weight:600; margin-bottom:8px}
  /* Chat area */
  .chat{
    flex:1; display:flex; flex-direction:column;
    padding:10px 12px 92px;   /* space for sticky input */
    gap:10px; max-width:860px; width:100%; margin:0 auto;
  }
  .msg{
    max-width:92%; width:fit-content;
    padding:12px 14px; border-radius:14px;
    background:var(--card); color:var(--text);
    box-shadow:0 8px 20px rgba(15,23,42,.08);
    line-height:1.45;
  }
  .user{ margin-left:auto; background:#111827; color:#fff }
  /* sticky input */
  .composer{
    position:sticky; bottom:0; left:0; right:0;
    padding:10px 12px; background:linear-gradient(180deg, rgba(234,246,255,0), var(--bg) 40%);
  }
  .compInner{
    display:flex; gap:10px; max-width:860px; margin:0 auto;
  }
  textarea{
    flex:1; resize:none; min-height:48px; max-height:140px;
    border-radius:14px; border:1px solid rgba(15,23,42,.08);
    padding:12px 12px 12px 14px; font:inherit; background:#fff;
  }
  .send{
    border:none; border-radius:14px; padding:0 18px; min-width:84px;
    background:linear-gradient(135deg,#8a7cf6,#f78acb);
    color:#fff; font-weight:800; box-shadow:0 10px 18px rgba(147,112,219,.28);
  }
  /* Belief modal bottom sheet */
  .sheet{
    position:fixed; inset:0; display:none; place-items:end center; z-index:40;
    background:rgba(3,7,18,.32); backdrop-filter:blur(3px);
  }
  .sheet.active{display:grid}
  .panel{
    width:100%; max-width:860px; background:var(--card); border-radius:20px 20px 0 0;
    padding:16px; box-shadow:0 -18px 40px rgba(15,23,42,.18);
  }
  .row{display:flex; align-items:center; justify-content:space-between; gap:8px}
  .faiths{
    display:grid; grid-template-columns:repeat(2,1fr); gap:8px; margin-top:12px
  }
  .faith{
    background:var(--pill); border:none; border-radius:12px; padding:10px;
    font-weight:600
  }
  .switch{display:flex; align-items:center; gap:8px}
  .toggle{appearance:none; width:46px; height:26px; border-radius:999px; background:#cbd5e1; position:relative}
  .toggle::after{content:""; position:absolute; width:20px; height:20px; border-radius:50%; background:white; top:3px; left:3px; transition:.2s}
  .toggle:checked{background:#34d399}
  .toggle:checked::after{left:23px}
  .note{margin-top:10px; color:var(--muted)}
  /* Mobile tweaks */
  @media (max-width:480px){
    .msg{max-width:96%}
    .bar{width:94vw}
  }
</style>
</head>
<body>
<div class="wrap">

  <header>
    <img src="https://raw.githubusercontent.com/alimulhaqkhan-prog/aura-x-omega-proto/main/assets-img/ai-resonance.png" alt="AURA-X" />
    <div class="tag">AURA-X Î© â€” the worldâ€™s first resonance-based AI with synthetic emotions.</div>

    <div class="topRow">
      <div class="bar"><div class="fill" id="emotionFill"></div></div>
      <div class="bel-voice">
        <button id="beliefBtn" class="chip">Belief</button>
        <button id="voiceBtn" class="chip" style="background:var(--accent); color:#053b2f;">Voice</button>
      </div>
    </div>

    <div class="heart" aria-hidden="true">ðŸ’•</div>
    <div class="clockWx" id="clockWx">â€”</div>
  </header>

  <main class="chat" id="chat">
    <div class="msg">
      Assalamualaikum! Iâ€™m AURA-X Î© â€” the worldâ€™s first resonance-based AI with synthetic emotions. How can I help you today?
    </div>
  </main>

  <div class="composer">
    <div class="compInner">
      <textarea id="inp" placeholder="Type your questionâ€¦"></textarea>
      <button class="send" id="send">Send</button>
    </div>
  </div>
</div>

<!-- Belief bottom sheet -->
<div class="sheet" id="beliefSheet" aria-hidden="true">
  <div class="panel" role="dialog" aria-modal="true" aria-labelledby="belTitle">
    <div class="row">
      <strong id="belTitle">Belief settings</strong>
      <button class="chip" id="closeBelief">Close</button>
    </div>

    <div class="row" style="margin-top:8px">
      <div class="switch">
        <input type="checkbox" id="faithOn" class="toggle">
        <label for="faithOn"><b>Faith ON</b> â€” add short encouragements (optional)</label>
      </div>
    </div>

    <p class="note">Pick your faith (used only to tailor optional verses/quotes in replies â€” nothing is sent to servers):</p>
    <div class="faiths" id="faithGrid"></div>
  </div>
</div>

<script>
/* ====== CONFIG ====== */
const CHAT_ENDPOINT = "https://alimai.online/api/chat.php"; // Hostinger PHP endpoint
const FALLBACK_GREETING = "(No live response â€” offline fallback)\n\nI'm AURA-X Î©. How can I assist you further?";
const FAITHS = [
  "Islam","Christianity","Hinduism","Buddhism","Sikhism",
  "Judaism","BahÃ¡Ê¼Ã­","Jainism","Atheism","Other"
];
const FAITH_SNIPPETS = {
  Islam: "ï´¿Ø¥ÙÙ†Ù‘ÙŽ Ù…ÙŽØ¹ÙŽ Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§ï´¾ â€” Surely with hardship comes ease.",
  Christianity: "â€œLet all that you do be done in love.â€ â€” 1 Cor 16:14",
  Hinduism: "â€œDo your duty without attachment to results.â€ â€” Bhagavad Gita",
  Buddhism: "â€œPeace comes from within. Do not seek it without.â€",
  Sikhism: "â€œNanak naam chardi kala, tere bhaane sarbat da bhala.â€",
  Judaism: "â€œThe world stands on three things: Torah, service, and kindness.â€ â€” Avot 1:2",
  "BahÃ¡Ê¼Ã­": "â€œSo powerful is the light of unity that it can illuminate the whole earth.â€",
  Jainism: "â€œAhimsa parmo dharma.â€ â€” Non-violence is the supreme duty.",
  Atheism: "â€œWe can find meaning through reason, empathy, and action.â€",
  Other: "Choose kindness; itâ€™s a universal language."
};

/* ====== UTIL ====== */
const qs = sel => document.querySelector(sel);
const chatEl = qs('#chat');
const inp = qs('#inp');
const sendBtn = qs('#send');

function addMsg(text, me=false){
  const b = document.createElement('div');
  b.className = 'msg' + (me ? ' user' : '');
  b.textContent = text || 'â€¦';
  chatEl.appendChild(b);
  chatEl.scrollTop = chatEl.scrollHeight;
}

/* ====== CLOCK + WEATHER ====== */
(async function clockWeather(){
  function tick(){
    const now = new Date();
    const fmt = new Intl.DateTimeFormat(undefined,{
      weekday:'short', day:'2-digit', month:'short',
      hour:'2-digit', minute:'2-digit', second:'2-digit'
    }).format(now);
    qs('#clockWx').textContent = qs('#clockWx').dataset.wx
      ? `${fmt}  |  ${qs('#clockWx').dataset.wx}`
      : fmt;
  }
  setInterval(tick,1000); tick();

  try{
    // Get approx location (ip-api as cors-free JSONP alt avoided) â†’ use geolocation
    if (navigator.geolocation){
      navigator.geolocation.getCurrentPosition(async pos=>{
        const {latitude, longitude} = pos.coords;
        const u = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m`;
        const r = await fetch(u); const j = await r.json();
        const t = j?.current?.temperature_2m;
        qs('#clockWx').dataset.wx = (typeof t === 'number') ? `ðŸŒ¡ï¸ ${t.toFixed(1)}Â°C` : 'Weather unavailable';
      }, _=> { qs('#clockWx').dataset.wx = 'Weather unavailable'; });
    }else{
      qs('#clockWx').dataset.wx = 'Weather unavailable';
    }
  }catch{ qs('#clockWx').dataset.wx = 'Weather unavailable'; }
})();

/* ====== EMOTION BAR DRIFT ====== */
const bar = qs('#emotionFill');
let pct = 90;
setInterval(()=>{
  pct += (Math.random()*6-3);
  pct = Math.max(5, Math.min(98, pct));
  bar.style.width = pct.toFixed(0)+'%';
  bar.title = pct.toFixed(0)+'%';
}, 1800);

/* ====== BELIEF SHEET ====== */
const beliefBtn = qs('#beliefBtn');
const sheet = qs('#beliefSheet');
const closeBelief = qs('#closeBelief');
const faithOn = qs('#faithOn');
const faithGrid = qs('#faithGrid');

function renderFaiths(){
  faithGrid.innerHTML = '';
  FAITHS.forEach(f=>{
    const b = document.createElement('button');
    b.className = 'faith'; b.textContent = f;
    b.onclick = ()=>{ localStorage.setItem('aura-faith', f); beliefBtn.textContent = `Belief`;
      addMsg(`Belief set: ${f}`, false);
    };
    faithGrid.appendChild(b);
  });
}
renderFaiths();

// restore
faithOn.checked = localStorage.getItem('aura-faith-on') === '1';
beliefBtn.textContent = 'Belief';
faithOn.onchange = ()=> localStorage.setItem('aura-faith-on', faithOn.checked ? '1':'0');

beliefBtn.onclick = ()=> sheet.classList.add('active');
closeBelief.onclick = ()=> sheet.classList.remove('active');
sheet.addEventListener('click', e=>{ if(e.target===sheet) sheet.classList.remove('active'); });

/* ====== VOICE (simple TTS) ====== */
qs('#voiceBtn').onclick = ()=>{
  const last = chatEl.querySelector('.msg:last-child');
  if(!last) return;
  const u = new SpeechSynthesisUtterance(last.textContent);
  u.lang = 'en-US'; speechSynthesis.speak(u);
};

/* ====== CHAT SEND ====== */
async function send(){
  const text = inp.value.trim();
  if(!text) return;
  addMsg(text, true);
  inp.value=''; inp.style.height='48px';

  // build payload
  const payload = { message: text, history: [] };

  try{
    const r = await fetch(CHAT_ENDPOINT, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify(payload)
    });
    const j = await r.json();

    let content =
      j?.choices?.[0]?.message?.content ||
      j?.content ||
      j?.reply ||
      JSON.stringify(j);

    // optional belief add-on
    if (faithOn.checked){
      const faith = localStorage.getItem('aura-faith') || 'Other';
      const add = FAITH_SNIPPETS[faith] || FAITH_SNIPPETS.Other;
      content += `\n\nâ€” ${add}`;
    }

    addMsg(content, false);
  }catch(e){
    addMsg(FALLBACK_GREETING, false);
  }
}
sendBtn.onclick = send;
inp.addEventListener('keydown', e=>{
  if(e.key==='Enter' && !e.shiftKey){ e.preventDefault(); send(); }
});
inp.addEventListener('input', ()=>{
  inp.style.height = '48px';
  inp.style.height = Math.min(140, inp.scrollHeight) + 'px';
});
</script>
</body>
</html>
