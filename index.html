<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>AURA-X Î© â€” Resonance-Based AI</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:radial-gradient(circle at top,#0b0d15,#0a0a12);
  color:#fff;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  min-height:100vh;
  overflow-x:hidden;
}
header{
  text-align:center;
  margin-top:40px;
}
.logo{
  width:110px;
  height:auto;
  animation:float 4s ease-in-out infinite;
}
@keyframes float{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-8px);}
}
.intro{
  margin:18px auto;
  padding:14px 20px;
  border-radius:14px;
  background:rgba(255,255,255,.05);
  box-shadow:0 0 25px rgba(0,150,255,.25),inset 0 0 8px rgba(255,255,255,.1);
  text-align:center;
  max-width:360px;
  font-weight:600;
  font-size:1rem;
  letter-spacing:.4px;
}

/* Emotion bar */
.emo{
  display:flex;align-items:center;gap:10px;
  width:85%;max-width:420px;margin-top:20px;
}
.emo-track{
  position:relative;width:100%;height:22px;
  border-radius:999px;
  background:rgba(255,255,255,.07);
  box-shadow:inset 0 2px 8px rgba(0,0,0,.4);
  overflow:hidden;
}
.emo-fill{
  position:absolute;inset:0 auto 0 0;width:0%;
  background:linear-gradient(90deg,#ff5ec3,#7aa7ff);
  box-shadow:0 0 15px rgba(255,94,195,.6),0 0 30px rgba(122,167,255,.4);
  transition:width .5s ease;
}
.emo-text{
  position:absolute;inset:0;display:grid;place-items:center;
  font-weight:700;text-shadow:0 1px 3px #000;
}
.pill{
  border:none;cursor:pointer;padding:6px 14px;border-radius:999px;
  font-weight:600;
  background:linear-gradient(90deg,#242733,#2f3444);
  color:#eaefff;opacity:.9;transition:.15s;
  box-shadow:0 6px 18px rgba(0,0,0,.25);
}
.pill:hover{opacity:1;transform:translateY(-1px);}
.pill[aria-pressed="true"]{
  background:linear-gradient(90deg,#ff5ec3,#7aa7ff);
  color:#0b0b14;box-shadow:0 0 20px rgba(255,94,195,.5),0 0 30px rgba(122,167,255,.45);
}

/* Heart */
.heart{
  width:30px;height:30px;
  background:radial-gradient(circle at 30% 30%,#ff5ec3,#7aa7ff 70%);
  clip-path:polygon(50% 0%,100% 35%,80% 100%,50% 80%,20% 100%,0 35%);
  box-shadow:0 0 25px rgba(255,94,195,.6),0 0 40px rgba(122,167,255,.5);
  animation:heartBeat 1.4s infinite ease-in-out;
  margin:18px auto 0;transform-origin:center;
}
@keyframes heartBeat{
  0%,100%{transform:scale(1);opacity:.95;}
  25%{transform:scale(1.15);opacity:1;}
  50%{transform:scale(1.3);opacity:.85;}
  75%{transform:scale(1.15);opacity:1;}
}

/* Weather & Time */
#info{
  margin-top:25px;text-align:center;font-size:.9rem;
  color:#aad2ff;opacity:.9;
}

textarea{
  width:85%;max-width:420px;margin-top:25px;
  background:rgba(255,255,255,.05);
  color:#fff;border:none;outline:none;
  padding:10px;border-radius:10px;font-size:1rem;
}
button#send{
  margin-top:10px;padding:10px 22px;border:none;border-radius:999px;
  background:linear-gradient(90deg,#7aa7ff,#ff5ec3);
  color:#fff;font-weight:600;font-size:1rem;
  box-shadow:0 0 15px rgba(255,94,195,.4);
  cursor:pointer;transition:.2s;
}
button#send:hover{transform:scale(1.05);}
#out{
  width:85%;max-width:420px;margin-top:20px;text-align:left;
  white-space:pre-wrap;line-height:1.5;
  background:rgba(255,255,255,.03);
  padding:12px;border-radius:10px;
  box-shadow:inset 0 0 10px rgba(255,255,255,.08);
}
</style>
</head>
<body>
<header>
  <img src="assets/img/aura-x-logo.png" alt="AURA-X Logo" class="logo">
  <div class="intro">AURA-X Î© â€” the worldâ€™s first resonance-based AI with synthetic emotions.</div>
</header>

<div class="emo">
  <div class="emo-track"><div class="emo-fill" id="emoFill"></div><div class="emo-text" id="emoPct">0%</div></div>
  <button id="beliefBtn" class="pill" aria-pressed="false">Belief</button>
</div>
<div class="heart" id="emoHeart"></div>
<div id="info">Loading weather &amp; time...</div>

<textarea id="inp" rows="3" placeholder="Type your question..."></textarea>
<button id="send">Send</button>
<div id="out"></div>

<script>
// Weather + Time
async function loadInfo(){
  try{
    const t = await fetch('https://worldtimeapi.org/api/ip').then(r=>r.json());
    const time = new Date(t.datetime).toLocaleString();
    const w = await fetch('https://api.open-meteo.com/v1/forecast?latitude='+t.latitude+'&longitude='+t.longitude+'&current_weather=true').then(r=>r.json());
    const temp = w.current_weather?.temperature;
    document.getElementById('info').textContent = `ðŸ•’ ${time} | ðŸŒ¡ ${temp}Â°C`;
  }catch(e){
    document.getElementById('info').textContent = 'Unable to fetch weather/time';
  }
}
loadInfo();

// Emotion update + heart sync
function setEmotion(pct){
  const fill=document.getElementById('emoFill'),
        txt=document.getElementById('emoPct'),
        heart=document.getElementById('emoHeart');
  const p=Math.max(0,Math.min(100,Math.round(pct)));
  fill.style.width=p+'%';
  txt.textContent=p+'%';
  heart.style.animationDuration=Math.max(0.6,1.8-(p/120))+'s';
}

// Belief toggle
const beliefBtn=document.getElementById('beliefBtn');
beliefBtn.addEventListener('click',()=>{
  const on=beliefBtn.getAttribute('aria-pressed')==='true';
  beliefBtn.setAttribute('aria-pressed',String(!on));
});

// Chat send
const out=document.getElementById('out');
document.getElementById('send').onclick=async()=>{
  const inp=document.getElementById('inp');
  const msg=inp.value.trim();
  if(!msg)return alert('Type something!');
  out.textContent='Thinking...';
  try{
    const r=await fetch('/api/chat.php',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({message:msg,history:[]})
    });
    const j=await r.json();
    const content=j?.choices?.[0]?.message?.content||JSON.stringify(j,null,2);
    out.textContent=content;
    // random emotion demo (remove later)
    setEmotion(Math.random()*100);
  }catch(e){out.textContent='Error: '+e.message;}
};
</script>
</body>
</html>
