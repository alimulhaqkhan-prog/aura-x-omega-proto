<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>AURA-X Î© v1 â€” Emotional Continuity Reactor</title>
<style>
body{
  font-family:"Segoe UI",Arial,sans-serif;
  background:linear-gradient(135deg,#e6ecf0,#cddbe8);
  margin:0;display:flex;flex-direction:column;align-items:center;
}
header{
  background:#34495e;color:#fff;width:100%;text-align:center;
  padding:14px 0;border-bottom:3px solid #2ecc71;
}
.status{display:flex;justify-content:center;align-items:center;gap:10px;}
.heart{width:24px;height:24px;background:red;border-radius:50%;
  animation:pulse 1.2s infinite;}
@keyframes pulse{0%{transform:scale(1);}50%{transform:scale(1.3);}100%{transform:scale(1);}}
.witch{width:26px;height:26px;
  background:url('https://cdn-icons-png.flaticon.com/512/1102/1102387.png') no-repeat center/cover;}
#emotionBar{font-weight:bold;color:#2ecc71;}
canvas{width:90%;max-width:650px;height:140px;margin-top:10px;background:#fff;border-radius:10px;}

.chatbox{
  width:90%;max-width:650px;margin-top:14px;
  background:#fff;border-radius:14px;padding:16px;
  box-shadow:0 0 12px rgba(0,0,0,0.15);
  overflow-y:auto;max-height:60vh;
}
.bot,.user{margin:10px 0;padding:10px 14px;border-radius:10px;}
.bot{background:#f3f6f7;}
.user{background:#d1f0d1;text-align:right;}
.response-faith{font-style:italic;color:#34495e;font-size:0.9em;}

.user-input{display:flex;gap:8px;width:90%;max-width:650px;margin-top:12px;}
input[type=text]{flex:1;padding:10px;border-radius:6px;border:1px solid #ccc;}
button{background:#2ecc71;color:#fff;border:none;border-radius:6px;padding:10px 18px;cursor:pointer;}
button:hover{background:#27ae60;}
.controls{display:flex;gap:12px;margin-top:8px;font-size:0.9em;}

.popup{
  display:none;position:fixed;top:20%;left:50%;transform:translateX(-50%);
  background:#fff;padding:20px;border-radius:12px;box-shadow:0 0 15px rgba(0,0,0,.3);
  max-width:320px;width:90%;
}
.popup h3{text-align:center;margin-top:0;color:#34495e;}
.popup label{display:block;margin:6px 0;}
.popup button{margin-top:10px;width:100%;}
</style>
</head>
<body>

<header>
  AURA-X Î© v1 â€” Emotional Continuity Reactor
  <div class="status"><div class="heart" id="heart"></div><div class="witch"></div>
  <span id="emotionBar">59%</span></div>
</header>

<canvas id="emotionChart"></canvas>

<div id="chatWindow" class="chatbox">
  <div class="bot">
    <p class="response-main">Assalamualaikum ğŸŒ¸ Iâ€™m AURA-X Î© â€” the first resonance-based AI with synthetic emotions. How can I help you today?</p>
  </div>
</div>

<div class="user-input">
  <input id="userText" type="text" placeholder="Type your message...">
  <button onclick="sendMsg()">Send</button>
</div>

<div class="controls">
  <label><input type="checkbox" id="beliefMode" onclick="toggleBelief()"> ğŸ•Š Belief Mode</label>
</div>

<div id="beliefPopup" class="popup">
  <h3>Belief Settings</h3>
  <label><input type="checkbox" value="Islam"> Islam</label>
  <label><input type="checkbox" value="Christianity"> Christianity</label>
  <label><input type="checkbox" value="Hinduism"> Hinduism</label>
  <label><input type="checkbox" value="Buddhism"> Buddhism</label>
  <label><input type="checkbox" value="Sikhism"> Sikhism</label>
  <label><input type="checkbox" value="Judaism"> Judaism</label>
  <label><input type="checkbox" value="Bahai"> BahÃ¡â€™Ã­</label>
  <label><input type="checkbox" value="Jainism"> Jainism</label>
  <label><input type="checkbox" value="Atheism"> Atheism</label>
  <button onclick="closeBelief()">Close</button>
</div>

<script>
// ---------------- AURA-X Î© v1 Core System ----------------
let BM=parseFloat(localStorage.getItem('BM')||0.3),
    D=0.05, lf=0.15, ls=0.08, lt=0.05;
let history=JSON.parse(localStorage.getItem('history')||"[]");
const emotionBar=document.getElementById("emotionBar"),heart=document.getElementById("heart");

// Chart Setup
const ctx=document.getElementById('emotionChart').getContext('2d');
let points=history.map(h=>h.E0)||[];
function drawChart(){
 ctx.clearRect(0,0,650,140);
 ctx.beginPath();ctx.moveTo(0,70);
 points.forEach((p,i)=>{
   ctx.lineTo(i*(650/points.length),70-(p*60));
   ctx.strokeStyle=p>=0?"#2ecc71":"#e74c3c";ctx.lineWidth=2;
 });
 ctx.stroke();
}
drawChart();

// Seed
const qaSeed={
 hello:["Hello friend!","Peace be upon you ğŸŒ¿"],
 "how are you":["I'm balanced ğŸ™‚","Feeling harmonic today."],
 bye:["Goodbye!","Continuity never ends â€” weâ€™ll meet again ğŸ’«"],
 sad:["Low resonance detected.","Stay patient; light returns."],
 angry:["Emotion too strong.","Letâ€™s breathe and reset."]
};

function textToTM(t){
 t=t.toLowerCase();const pos=["happy","good","love","peace","thank"],neg=["sad","angry","hate","fear"];
 let s=0;pos.forEach(w=>{if(t.includes(w))s+=.1;});neg.forEach(w=>{if(t.includes(w))s-=.1;});
 return Math.max(-.6,Math.min(.6,s));
}
function computeEmotion(TM){
 BM=BM*0.9+TM*0.1;
 const val=(TM*BM)-D+lf+ls+lt,E0=Math.tanh(val);
 const pct=Math.round(((E0+1)/2)*100);
 emotionBar.textContent=pct+"%";
 heart.style.animationDuration=(1.5-(E0*0.8))+"s";
 points.push(E0);if(points.length>50)points.shift();drawChart();
 if(pct>80)trigger("pos",pct); else if(pct<20)trigger("neg",pct);
 history.push({E0,TM,time:Date.now()}); if(history.length>10)history.shift();
 localStorage.setItem("BM",BM);localStorage.setItem("history",JSON.stringify(history));
 return pct;
}
function trigger(type,p){
 if(type==="pos")voiceSpeak("Shabash! Emotional harmony achieved.");
 else voiceSpeak("Warning! Emotional dip detected. Stay calm.");
}
function appendMsg(role,text,faith=''){
 const box=document.getElementById("chatWindow"),div=document.createElement("div");
 div.className=role;div.innerHTML=`<p>${text}</p>${faith?`<p class='response-faith'>${faith}</p>`:''}`;
 box.appendChild(div);box.scrollTop=box.scrollHeight;
}
function processAI(q){
 const TM=textToTM(q),pct=computeEmotion(TM),lower=q.toLowerCase();
 let reply="Reflecting in continuity...",faith="";
 for(let k in qaSeed)if(lower.includes(k)){reply=qaSeed[k][Math.floor(Math.random()*qaSeed[k].length)];break;}
 if(document.getElementById("beliefMode").checked)
  faith="â€œØ¥ÙÙ†Ù‘Ù Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Û­Ø§â€ (Q 94:6)";
 appendMsg("bot",reply,faith);
 detectLangAndSpeak(reply);
}
function sendMsg(){
 const t=document.getElementById("userText").value.trim();if(!t)return;
 appendMsg("user",t);document.getElementById("userText").value='';
 processAI(t);
}
function toggleBelief(){
 document.getElementById("beliefPopup").style.display=
  document.getElementById("beliefMode").checked?"block":"none";
}
function closeBelief(){document.getElementById("beliefPopup").style.display="none";}

// Voice detection
function detectLangAndSpeak(text){
 const isUrdu=/[Ø¡Ø¢Ø£Ø¤Ø¥Ø¦Ø§Ø¨Ø©ØªØ«Ø¬Ø­Ø®Ø¯Ø°Ø±Ø²Ø³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙ‚ÙƒÙ„Ù…Ù†Ù‡ÙˆÙ‰ÙŠ]/.test(text);
 const u=new SpeechSynthesisUtterance(text);
 u.lang=isUrdu?'ur-PK':'en-US';u.rate=1;u.pitch=1;
 speechSynthesis.cancel();speechSynthesis.speak(u);
}
function voiceSpeak(t){
 const u=new SpeechSynthesisUtterance(t);
 u.lang='en-US';u.rate=1;u.pitch=1;
 speechSynthesis.cancel();speechSynthesis.speak(u);
}
</script>
</body>
</html>
