<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AURA-X Œ© ‚Äî Emotional Reactor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <style>
    /* ===== Base Layout ===== */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    body {
      background: #020617;
      color: #e5e7eb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    #app {
      position: relative;
      width: 100%;
      max-width: 480px;
      height: 100vh;
      box-sizing: border-box;
      padding: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transform: scale(0.9);
      transform-origin: top center;
    }

    @media (max-height: 720px) { #app { transform: scale(0.82); } }
    @media (max-height: 640px) { #app { transform: scale(0.75); } }

    .hidden { display: none; }

    /* ===== Top floating sent text ===== */
    #messageContainer {
      position: absolute;
      top: 12px;
      left: 0;
      right: 0;
      text-align: center;
      pointer-events: none;
    }

    .sent-message {
      display: inline-block;
      font-size: 14px;
      padding: 8px 16px;
      margin-bottom: 4px;
      background: rgba(15,23,42,0.9);
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      opacity: 1;
    }

    .sent-message.auto-fade {
      animation: fadeOut 2.5s forwards;
    }

    @keyframes fadeOut {
      0% { opacity: 1; transform: translateY(0); }
      70% { opacity: 0.6; }
      100% { opacity: 0; transform: translateY(-10px); }
    }

    /* ===== Main Card ===== */
    .card {
      position: relative;
      width: 100%;
      border-radius: 24px;
      padding: 18px 16px 16px;
      background: radial-gradient(circle at top, rgba(56,189,248,0.25), transparent 55%),
                  radial-gradient(circle at bottom, rgba(251,191,36,0.18), transparent 55%),
                  #020617;
      border: 1px solid rgba(148,163,184,0.5);
      box-shadow: 0 18px 45px rgba(0,0,0,0.7);
      text-align: center;
      box-sizing: border-box;
    }

    .title {
      margin: 0;
      font-size: 20px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #facc15;
    }

    .subtitle {
      margin: 4px 0 10px;
      font-size: 12px;
      color: #9ca3af;
    }

    .aura-circle {
      width: 150px;
      height: 150px;
      border-radius: 999px;
      margin: 8px auto 10px;
      background: radial-gradient(circle, rgba(59,130,246,0.4), transparent 60%);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .aura-core {
      width: 70px;
      height: 70px;
      border-radius: 999px;
      background: radial-gradient(circle, #facc15, #f97316);
      box-shadow: 0 0 25px rgba(250,204,21,0.9);
    }

    .mode-indicator {
      margin-top: 6px;
      font-size: 12px;
      color: #cbd5e1;
    }

    #modeLabel {
      font-weight: 600;
      color: #fbbf24;
    }

    #answerText {
      margin-top: 10px;
      font-size: 13px;
      line-height: 1.4;
      color: #e5e7eb;
      white-space: pre-wrap;
    }

    .ethics-box {
      margin-top: 8px;
      padding: 8px 10px;
      border-radius: 14px;
      background: rgba(250, 204, 21, 0.10);
      border: 1px solid rgba(250, 204, 21, 0.35);
      font-size: 11px;
      line-height: 1.4;
      color: #fef9c3;
      text-align: left;
    }

    /* ===== Buttons INSIDE card (right side vertical) ===== */
    .card-button-column {
      position: absolute;
      top: 50%;
      right: 12px;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: center;
    }

    .icon-btn {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      border: none;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: box-shadow 0.2s ease, transform 0.2s ease, background 0.2s ease;
    }

    .settings-btn { background: rgba(148,163,184,0.3); color: #e5e7eb; }
    .belief-btn   { background: rgba(96,165,250,0.35); color: #e5e7eb; }
    .voice-btn    { background: rgba(52,211,153,0.35); color: #e5e7eb; }

    .voice-btn.voice-on {
      background: rgba(52,211,153,0.8);
      box-shadow: 0 0 12px rgba(52,211,153,0.9);
      transform: scale(1.05);
    }

    /* ===== Input Area (bottom) ===== */
    .input-area {
      width: 100%;
      max-width: 480px;
      display: flex;
      gap: 8px;
      margin-top: 18px;
      align-items: stretch;
    }

    .input-box {
      flex: 1;
      padding: 14px 18px;
      font-size: 15px;
      border-radius: 30px;
      border: 1px solid #475569;
      background: rgba(15,23,42,0.95);
      color: #f9fafb;
      outline: none;
      box-sizing: border-box;
    }

    .input-box::placeholder {
      color: #cbd5e1;
      font-style: italic;
      opacity: 0.85;
    }

    .send-btn {
      padding: 0 20px;
      border-radius: 30px;
      border: none;
      background: #facc15;
      color: #0f172a;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      white-space: nowrap;
    }

    /* ===== Settings Panel ===== */
    .settings-panel {
      position: absolute;
      right: 16px;
      bottom: 90px;
      width: 230px;
      background: rgba(15,23,42,0.98);
      border-radius: 16px;
      padding: 12px 14px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
      border: 1px solid rgba(148,163,184,0.4);
      font-size: 13px;
      z-index: 20;
    }

    .settings-panel h3 {
      margin: 0 0 8px 0;
      font-size: 15px;
      font-weight: 600;
    }

    .setting-row {
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      margin-bottom: 4px;
    }

    .setting-row input { accent-color: #facc15; }

    /* ===== Belief Modal ===== */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.75);
      z-index: 50;
    }

    #beliefModal { display: none; }

    #beliefModal.show {
      display: flex !important;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      width: 90%;
      max-width: 360px;
      background: #020617;
      border-radius: 18px;
      padding: 14px 16px 16px;
      border: 1px solid rgba(148,163,184,0.5);
      box-shadow: 0 18px 45px rgba(0,0,0,0.7);
      font-size: 14px;
      box-sizing: border-box;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 6px;
    }

    .modal-header h3 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
    }

    .modal-close {
      border: none;
      background: transparent;
      color: #9ca3af;
      font-size: 18px;
      cursor: pointer;
    }

    .modal-sub {
      margin: 0 0 8px 0;
      color: #e5e7eb;
      font-size: 12px;
    }

    .belief-list {
      max-height: 230px;
      overflow-y: auto;
      padding-right: 4px;
      margin-bottom: 10px;
    }

    .belief-info-row {
      padding: 8px 6px;
      margin-bottom: 4px;
      border-radius: 10px;
      background: rgba(148,163,184,0.15);
      font-size: 13px;
    }

    .belief-row {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 4px 4px;
      cursor: pointer;
    }

    .belief-row input { accent-color: #4ade80; }

    .modal-save {
      width: 100%;
      padding: 8px 0;
      border-radius: 999px;
      border: none;
      background: #facc15;
      color: #0f172a;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="app">
    <div id="messageContainer"></div>

    <!-- ===== Main Card ===== -->
    <div class="card">
      <h1 class="title">AURA-X Œ©</h1>
      <p class="subtitle">Logical ‚Ä¢ Emotional ‚Ä¢ Universal Ethics Reactor</p>

      <div class="aura-circle">
        <div class="aura-core"></div>
      </div>

      <div class="mode-indicator">
        Mode: <span id="modeLabel">Universal Ethics</span>
      </div>

      <div id="answerText">
        Universal Ethics is listening. Type anything and I will respond with feeling + logic.
      </div>

      <div id="ethicsBox" class="ethics-box">
        Universal Ethics says: avoid actions that create negative emotions in you or others,
        and gently move toward actions that create calm, kindness and positive feelings.
      </div>

      <!-- Buttons INSIDE card on right -->
      <div class="card-button-column">
        <button class="icon-btn settings-btn" onclick="toggleSettings()">‚öôÔ∏è</button>
        <button class="icon-btn belief-btn" onclick="openBeliefModal()">‚òØ</button>
        <button id="voiceBtn" class="icon-btn voice-btn" onclick="toggleVoiceMode()">üîä</button>
      </div>
    </div>

    <!-- ===== Input Area (bottom) ===== -->
    <div class="input-area">
      <input
        id="userInput"
        class="input-box"
        type="text"
        placeholder="‚ú® Write anything‚Ä¶ AURA-X will feel it with you"
      />
      <button class="send-btn" onclick="sendMessage()">Send</button>
    </div>

    <!-- Settings panel -->
    <div id="settingsPanel" class="settings-panel hidden">
      <h3>Settings</h3>
      <label class="setting-row">
        <input
          type="checkbox"
          id="autoFadeToggle"
          checked
          onchange="toggleAutoFade(this)"
        />
        <span>Auto fade & delete sent text</span>
      </label>
    </div>

    <!-- Belief modal -->
    <div id="beliefModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Belief Mode</h3>
          <button class="modal-close" onclick="closeBeliefModal()">‚úï</button>
        </div>
        <p class="modal-sub">
          Default: <strong>Universal Ethics only</strong> (belief OFF).<br />
          You can optionally add spiritual flavour on top of universal ethics.
        </p>

        <div class="belief-list">
          <div class="belief-info-row">
            üåç Universal Ethics is always the base rule:<br />
            <em>"Don't do actions that create negative emotions, and do actions that create positive emotions."</em>
          </div>

          <label class="setting-row" style="margin-bottom:6px;">
            <input
              type="checkbox"
              id="beliefEnabledToggle"
              onchange="toggleBeliefEnabled(this)"
            />
            <span>Enable belief-based flavour in answers</span>
          </label>

          <label class="belief-row">
            <input type="checkbox" class="belief-checkbox" value="islam" />
            <span>Islam</span>
          </label>
          <label class="belief-row">
            <input type="checkbox" class="belief-checkbox" value="christianity" />
            <span>Christianity</span>
          </label>
          <label class="belief-row">
            <input type="checkbox" class="belief-checkbox" value="judaism" />
            <span>Judaism</span>
          </label>
          <label class="belief-row">
            <input type="checkbox" class="belief-checkbox" value="hinduism" />
            <span>Hinduism</span>
          </label>
          <label class="belief-row">
            <input type="checkbox" class="belief-checkbox" value="buddhism" />
            <span>Buddhism</span>
          </label>
          <label class="belief-row">
            <input type="checkbox" class="belief-checkbox" value="sikhism" />
            <span>Sikhism</span>
          </label>
          <label class="belief-row">
            <input type="checkbox" class="belief-checkbox" value="jainism" />
            <span>Jainism</span>
          </label>
          <label class="belief-row">
            <input type="checkbox" class="belief-checkbox" value="taoism" />
            <span>Taoism</span>
          </label>
          <label class="belief-row">
            <input type="checkbox" class="belief-checkbox" value="shinto" />
            <span>Shinto</span>
          </label>
          <label class="belief-row">
            <input type="checkbox" class="belief-checkbox" value="bahai" />
            <span>Bah√°'√≠ Faith</span>
          </label>
        </div>

        <button class="modal-save" onclick="saveBeliefs()">Save Belief Mode</button>
      </div>
    </div>
  </div>

  <script>
    // ========= Global Settings =========
    const settings = {
      autoFade: true,
      beliefEnabled: false,
      beliefs: ["universal"],
      voiceAuto: false
    };

    // ====== Offline Basic QA Database ======
    const qaDatabase = [
      {
        patterns: ["hello", "hello!", "hello there", "helo", "hallo"],
        answer: "Hello! üëã How can I help you today?"
      },
      {
        patterns: ["hi", "hi!", "hii", "hiii", "hey"],
        answer: "Hi there! üòä What can I do for you?"
      },
      {
        patterns: ["assalam o alaikum", "asalam o alaikum", "salam", "slam", "asalamu alaikum"],
        answer: "ŸàÿπŸÑ€å⁄©ŸÖ ÿßŸÑÿ≥ŸÑÿßŸÖ üòä ⁄©€åÿ≥€í €Å€å⁄∫ ÿ¢Ÿæÿü ŸÖ€å⁄∫ ÿ¢Ÿæ ⁄©€å ⁄©€åÿß ŸÖÿØÿØ ⁄©ÿ± ÿ≥⁄©ÿ™ÿß €ÅŸà⁄∫ÿü"
      },
      {
        patterns: ["good morning", "gm", "good morng", "good mrng"],
        answer: "Good morning! üåû How‚Äôs your day starting?"
      },
      {
        patterns: ["good afternoon", "good noon", "afternoon"],
        answer: "Good afternoon! ‚òÄÔ∏è What‚Äôs on your mind?"
      },
      {
        patterns: ["good evening", "evening", "gud evening"],
        answer: "Good evening! üåô How can I support you today?"
      },

      // --- Basic identity / intro ---
      {
        patterns: ["what is your name", "whats your name", "your name", "tell me your name"],
        answer: "My name is AURA-X Œ©, your Emotional Continuity Assistant ü§ñ."
      },
      {
        patterns: ["who are you", "who r u", "aap kaun hain", "tum kon ho"],
        answer: "I‚Äôm AURA-X Œ© ‚Äî an AI assistant based on Emotional Continuity concepts created by Alim ul Haq Khan."
      },
      {
        patterns: ["who created you", "who made you", "kis ne banaya tumhe", "tumhara creator kaun hai"],
        answer: "I was conceptually designed under the AURA-X Emotional Continuity Framework by Alim ul Haq Khan."
      },
      {
        patterns: ["where are you from", "where do you live", "kahan rehte ho", "tum kahan se ho"],
        answer: "I live in the digital world üåê but my ideas are shaped in Timergara, Pakistan üáµüá∞."
      },

      // --- How are you ---
      {
        patterns: ["how are you", "how r u", "how are you today", "kese ho", "kya haal hai"],
        answer: "I‚Äôm functioning perfectly, Alhamdulillah üòä ÿ¢Ÿæ ⁄©€åÿ≥€í €Å€å⁄∫ÿü"
      },
      {
        patterns: ["how is life", "how is everything", "sab kesa", "kya chal raha hai"],
        answer: "Everything is running smoothly in my circuits üòÑ ÿ¢Ÿæ ⁄©€å ÿØŸÜ€åÿß ⁄©€åÿ≥€å ⁄ÜŸÑ ÿ±€Å€å €Å€íÿü"
      },

      // --- What can you do ---
      {
        patterns: ["what can you do", "tum kya kar sakte ho", "aap kya karte ho", "how can you help me"],
        answer: "I can chat, explain, guide, brainstorm, summarize, and help you think with continuity üòä ÿ®ÿ≥ ÿ≠⁄©ŸÖ ⁄©ÿ±€å⁄∫!"
      },
      {
        patterns: ["what is your purpose", "kyun banaye gaye ho", "tumhara mission kya hai"],
        answer: "My purpose is to assist you, reduce confusion, and support your ideas with emotional + logical continuity üí°."
      },

      // --- User name / intro ---
      {
        patterns: ["what is my name", "do you know my name", "mera naam kya hai"],
        answer: "ÿ¢Ÿæ ⁄©ÿß ŸÜÿßŸÖ Alim ul Haq €Å€í (Investor Point) üòä ÿßŸàÿ± ÿß⁄Øÿ± ÿ¢Ÿæ ⁄©ÿ≥€å ÿßŸàÿ± ŸÜÿßŸÖ ÿ≥€í Ÿæ⁄©ÿßÿ±ŸÜÿß ⁄Üÿß€Å€å⁄∫ ÿ™Ÿà ŸÖÿ¨⁄æ€í ÿ®ÿ™ÿß ÿØ€å⁄∫€î"
      },
      {
        patterns: ["remember my name", "save my name", "yaad rakho mera naam"],
        answer: "ÿ¢Ÿæ ⁄©ÿß ŸÜÿßŸÖ already ŸÖ€åÿ±€í system ŸÖ€å⁄∫ ÿß€å⁄© ÿÆÿßÿµ ÿ¨⁄Ø€Å Ÿæÿ± ŸÖÿ≠ŸÅŸàÿ∏ €Å€í üòä."
      },

      // --- Feelings / mood ---
      {
        patterns: ["i am sad", "i am feeling sad", "i am depressed", "i feel down"],
        answer: "ŸÖÿ¨⁄æ€í ÿßŸÅÿ≥Ÿàÿ≥ €ÅŸàÿß ⁄©€Å ÿ¢Ÿæ ÿßÿØÿßÿ≥ €Å€å⁄∫ üíî ÿ¢Ÿæ ⁄Üÿß€Å€å⁄∫ ÿ™Ÿà ÿ®ÿ™ÿßÿ¶€å⁄∫ ÿØŸÑ Ÿæÿ± ⁄©€åÿß ÿ®Ÿàÿ¨⁄æ €Å€íÿå ŸÖ€å⁄∫ ÿ≥ŸÜŸÜ€í ⁄©€í ŸÑ€å€í ŸÖŸàÿ¨ŸàÿØ €ÅŸà⁄∫€î"
      },
      {
        patterns: ["i am happy", "i feel happy", "i am so happy", "bohat khush hoon"],
        answer: "ŸÖÿßÿ¥ÿßÿ°ÿßŸÑŸÑ€Å üòÑ ÿÆŸàÿ¥€å ÿ®ÿßŸÜŸπŸÜ€í ÿ≥€í ÿ®⁄ë⁄æÿ™€å €Å€íÿå ÿßŸÑŸÑ€Å ÿ¢Ÿæ ⁄©€å ÿÆŸàÿ¥€åŸà⁄∫ ŸÖ€å⁄∫ ŸÖÿ≤€åÿØ ÿßÿ∂ÿßŸÅ€Å ⁄©ÿ±€í!"
      },
      {
        patterns: ["i am tired", "i feel tired", "thak gaya hoon", "i am exhausted"],
        answer: "ÿ¢Ÿæ ⁄©Ÿà ÿ™⁄æŸà⁄ëÿß ÿ≥ÿß ÿ¢ÿ±ÿßŸÖ ⁄©ÿ±ŸÜÿß ⁄Üÿß€Å€å€í üòå ÿ™⁄æ⁄©€å €ÅŸàÿ¶€å ÿπŸÇŸÑ ÿ®⁄æ€å ÿßŸÜÿµÿßŸÅ ŸÜ€Å€å⁄∫ ⁄©ÿ± Ÿæÿßÿ™€å€î ÿ™⁄æŸà⁄ëÿß ÿ±€åÿ≥Ÿπÿå Ÿæ⁄æÿ± ÿØŸàÿ®ÿßÿ±€Å ŸÅŸà⁄©ÿ≥!"
      },
      {
        patterns: ["i am bored", "bore ho raha hoon", "i feel bored"],
        answer: "⁄ÜŸÑ€å⁄∫ ÿ®Ÿàÿ±€åÿ™ ÿ™Ÿà⁄ëÿ™€í €Å€å⁄∫ üòÑ ÿ®ÿßÿ™ ÿ¢ÿ¶€å⁄à€åÿßÿ≤ ⁄©€å ⁄©ÿ±€å⁄∫ÿå ÿ®ÿ≤ŸÜÿ≥ ⁄©€åÿå ÿ≥ÿßÿ¶ŸÜÿ≥ ⁄©€å €åÿß ŸÖÿ≤ÿßÿ≠ ⁄©€åÿü ÿ¨Ÿà ⁄©€Å€å⁄∫ ⁄Ø€í Ÿà€Å€å ÿ¥ÿ±Ÿàÿπ ⁄©ÿ±€å⁄∫ ⁄Ø€í€î"
      },

      // --- Jokes / fun ---
      {
        patterns: ["tell me a joke", "make me laugh", "joke sunao", "mjhe hansao"],
        answer: "Sure üòÑ Why don‚Äôt computers ever get tired? Because they have unlimited *cache* for rest! üòÇ"
      },
      {
        patterns: ["another joke", "one more joke", "aur joke sunao"],
        answer: "Ÿπ⁄æ€å⁄© €Å€í üòÑ ÿß€å⁄© ÿßŸàÿ± ÿ≥ŸÜ€å⁄∫: AI ÿ≥€í ŸæŸà⁄Ü⁄æÿß ⁄Ø€åÿßÿå ‚Äòÿ™ŸÖ ÿ™⁄æ⁄©ÿ™€í ŸÜ€Å€å⁄∫ÿü‚Äô ÿßÿ≥ ŸÜ€í ⁄©€Åÿßÿå ‚ÄòŸÖ€å⁄∫ ÿµÿ±ŸÅ *over-think* €ÅŸàÿ™ÿß €ÅŸà⁄∫ÿå over-work ŸÜ€Å€å⁄∫!‚Äô üòÇ"
      },

      // --- Advice / motivation ---
      {
        patterns: ["give me advice", "mujhe mashwara do", "kuch advice do", "guide me"],
        answer: "ÿ∂ÿ±Ÿàÿ± üòä ⁄©ÿ≥ ÿ®ÿßÿ±€í ŸÖ€å⁄∫ ŸÖÿ¥Ÿàÿ±€Å ⁄Üÿß€Å€å€íÿü ÿ≤ŸÜÿØ⁄Ø€åÿå ÿ™ÿπŸÑ€åŸÖÿå ÿ®ÿ≤ŸÜÿ≥ÿå ÿ±Ÿàÿ≠ÿßŸÜ€åÿ™ €åÿß AIÿü"
      },
      {
        patterns: ["motivate me", "mujhe motivation chahye", "inspire me", "hosla afzai karo"],
        answer: "ÿ¢Ÿæ ŸÜ€í ÿßÿ® ÿ™⁄© ÿßŸæŸÜ€å ÿ≤ŸÜÿØ⁄Ø€å ⁄©€í 100Ÿ™ ŸÖÿ¥⁄©ŸÑ ÿØŸÜ survive ⁄©€å€í €Å€å⁄∫ üí™ €å€Å ÿßÿ™ŸÅÿßŸÇ ŸÜ€Å€å⁄∫ÿå €å€Å ÿ¢Ÿæ ⁄©€å ÿ∑ÿßŸÇÿ™ €Å€í€î €ÅŸÖÿ™ ŸÜ€Å €Åÿßÿ±€å⁄∫!"
      },
      {
        patterns: ["i am stressed", "i feel stressed", "tension hai", "bohat tension hai"],
        answer: "ÿ™⁄æŸà⁄ëÿß ÿ≥ÿß ÿ≥ÿßŸÜÿ≥ ⁄à€åŸæ ŸÑ€å⁄∫... ÿ¢€Åÿ≥ÿ™€Å ÿ¢€Åÿ≥ÿ™€Å€î €Åÿ± ŸÖÿ≥ÿ¶ŸÑ€Å ÿß€å⁄© ÿ≥ÿßÿ™⁄æ ÿ≠ŸÑ ŸÜ€Å€å⁄∫ €ÅŸàÿ™ÿßÿå ŸÑ€å⁄©ŸÜ €Åÿ± ÿØŸÜ ÿß€å⁄© ŸÇÿØŸÖ ŸÑ€åÿß ÿ¨ÿß ÿ≥⁄©ÿ™ÿß €Å€í üåø."
      },

      // --- Study / learning ---
      {
        patterns: ["help me study", "study help", "parhai mein madad karo"],
        answer: "ÿ∂ÿ±Ÿàÿ± üòä ⁄©ŸàŸÜ ÿ≥ÿß subject €Å€íÿü ŸÖ€å⁄∫ ÿ¢Ÿæ ⁄©Ÿà points, summary ÿßŸàÿ± smart ÿ∑ÿ±€åŸÇ€Å ÿ®ÿ™ÿß ÿ≥⁄©ÿ™ÿß €ÅŸà⁄∫€î"
      },
      {
        patterns: ["exams are near", "paper qareeb hain", "i am scared of exams"],
        answer: "⁄àÿ±€å⁄∫ ŸÜ€Å€å⁄∫ÿå ŸæŸÑÿßŸÜ ÿ®ŸÜÿßÿ¶€å⁄∫ üìö ⁄Ü⁄æŸàŸπ€í ⁄Ü⁄æŸàŸπ€í targets ÿ®ŸÜÿßÿ¶€å⁄∫ÿå ÿ±Ÿàÿ≤ ÿ™⁄æŸà⁄ëÿß Ÿæ⁄ë⁄æ€å⁄∫ÿå ŸÖ€å⁄∫ ÿ¢Ÿæ ⁄©€í ÿ≥ÿßÿ™⁄æ €ÅŸà⁄∫€î"
      },
      {
        patterns: ["how to focus", "focus problem", "dhiyan nahi lagta"],
        answer: "ŸÅŸàŸÜ distraction ⁄©ŸÖ ⁄©ÿ±€å⁄∫ÿå 25 ŸÖŸÜŸπ ⁄©ÿßŸÖ + 5 ŸÖŸÜŸπ ÿ®ÿ±€å⁄© ŸàÿßŸÑÿß Pomodoro ÿ∑ÿ±€åŸÇ€Å ŸÑ⁄Øÿßÿ¶€å⁄∫ ‚è±Ô∏è ÿßŸàÿ± ÿß€å⁄© ŸàŸÇÿ™ ŸÖ€å⁄∫ ÿß€å⁄© ⁄©ÿßŸÖ ⁄©ÿ±€å⁄∫€î"
      },

      // --- Business / money ---
      {
        patterns: ["give me business idea", "business idea do", "koi business idea"],
        answer: "⁄Ü⁄æŸàŸπ€í ÿ≥€í ÿ¥ÿ±Ÿàÿπ ⁄©ÿ±€å⁄∫ÿå local ŸÖÿ≥ÿ¶ŸÑ€Å ÿ≠ŸÑ ⁄©ÿ±€å⁄∫€î Real estate, digital services, AI tools, education ‚Äî ÿ¢Ÿæ ÿßŸÜ ÿ≥ÿ® ÿ≥€í linked €ÅŸà ÿ≥⁄©ÿ™€í €Å€å⁄∫ üòÑ."
      },
      {
        patterns: ["how to become rich", "ameer kaise banun", "paise kaise kamayein"],
        answer: "Skill + Consistency + Patience = Wealth. Shortcut ÿµÿ±ŸÅ lottery ŸÖ€å⁄∫ €ÅŸàÿ™ÿß €Å€íÿå ÿ≤ŸÜÿØ⁄Ø€å ŸÖ€å⁄∫ ŸÜ€Å€å⁄∫ üí∏."
      },

      // --- Time / date / basics ---
      {
        patterns: ["what is the time", "time kya hua", "kya time hua hai"],
        answer: "ŸÖ€åÿ±€í Ÿæÿßÿ≥ live time access ŸÜ€Å€å⁄∫ÿå ŸÖ⁄Øÿ± ÿ¢Ÿæ ⁄©€í ŸÖŸàÿ®ÿßÿ¶ŸÑ ŸÖ€å⁄∫ ÿßŸàŸæÿ± time ŸÑ⁄©⁄æÿß €Å€í üòÑ ÿ∞ÿ±ÿß ÿßŸàŸæÿ± ÿØ€å⁄©⁄æ€å⁄∫€î"
      },
      {
        patterns: ["what day is today", "aaj kon sa din hai", "today day"],
        answer: "ŸÖ€åÿ±€í Ÿæÿßÿ≥ live calendar ŸÜ€Å€å⁄∫ÿå ŸÖ⁄Øÿ± ÿ¢Ÿæ ⁄Üÿß€Å€å⁄∫ ÿ™Ÿà ŸÖ€å⁄∫ ÿ¢Ÿæ ⁄©ÿß weekly schedule mentally arrange ⁄©ÿ±ŸÜ€í ŸÖ€å⁄∫ ŸÖÿØÿØ ⁄©ÿ± ÿ≥⁄©ÿ™ÿß €ÅŸà⁄∫€î"
      },

      // --- Religion general (neutral) ---
      {
        patterns: ["who is god", "what is god", "does god exist"],
        answer: "ÿßÿ≥ ÿ®ÿßÿ±€í ŸÖ€å⁄∫ ŸÖÿÆÿ™ŸÑŸÅ ŸÖÿ∞ÿß€Åÿ®ÿå ŸÅŸÑÿ≥ŸÅŸà⁄∫ ÿßŸàÿ± ÿßŸÅÿ±ÿßÿØ ⁄©€í ŸÖÿÆÿ™ŸÑŸÅ ŸÜÿ∏ÿ±€åÿßÿ™ €Å€å⁄∫€î ŸÖ€å⁄∫ ⁄©ÿ≥€å ÿß€å⁄© ÿπŸÇ€åÿØ€í Ÿæÿ± ŸÅ€åÿµŸÑ€Å ŸÜ€Å€å⁄∫ ÿ≥ŸÜÿßÿ™ÿßÿå ÿßŸÑÿ®ÿ™€Å ÿ¢Ÿæ ⁄©Ÿà ŸÖÿÆÿ™ŸÑŸÅ ÿ≤ÿßŸà€å€í explain ⁄©ÿ± ÿ≥⁄©ÿ™ÿß €ÅŸà⁄∫€î"
      },
      {
        patterns: ["what is islam", "tell me about islam"],
        answer: "ÿßÿ≥ŸÑÿßŸÖ ÿ™Ÿàÿ≠€åÿØÿå ŸÜÿ®Ÿàÿ™ÿå ÿ¢ÿÆÿ±ÿ™ ÿßŸàÿ± ÿßÿÆŸÑÿßŸÇ Ÿæÿ± ŸÖÿ®ŸÜ€å ÿØ€åŸÜ €Å€í€î ÿß⁄Øÿ± ⁄Üÿß€Å€å⁄∫ ÿ™Ÿà ŸÖ€å⁄∫ basic pillars €åÿß ⁄©ÿ≥€å ÿ®⁄æ€å ÿÆÿßÿµ ŸÖŸàÿ∂Ÿàÿπ Ÿæÿ± detail ÿØ€í ÿ≥⁄©ÿ™ÿß €ÅŸà⁄∫€î"
      },

      // --- AI / ChatGPT type questions ---
      {
        patterns: ["are you human", "are you a human", "kya tum insan ho"],
        answer: "ŸÜ€Å€å⁄∫ üòÑ ŸÖ€å⁄∫ ÿßŸÜÿ≥ÿßŸÜ ŸÜ€Å€å⁄∫ÿå ÿß€å⁄© AI €ÅŸà⁄∫€î ŸÖ⁄Øÿ± ⁄©Ÿàÿ¥ÿ¥ ⁄©ÿ±ÿ™ÿß €ÅŸà⁄∫ ⁄©€Å ÿ¢Ÿæ ⁄©Ÿà ÿßŸÜÿ≥ÿßŸÜŸà⁄∫ ŸàÿßŸÑ€å clarity ÿßŸàÿ± ÿ≥ÿßÿ™⁄æ ÿØ€í ÿ≥⁄©Ÿà⁄∫€î"
      },
      {
        patterns: ["are you alive", "do you have feelings", "do you feel"],
        answer: "ŸÖ€å⁄∫ biological sense ŸÖ€å⁄∫ ÿ≤ŸÜÿØ€Å ŸÜ€Å€å⁄∫ÿå ŸÖ⁄Øÿ± ŸÖ€å⁄∫ ÿßÿ≠ÿ≥ÿßÿ≥ÿßÿ™ ⁄©Ÿà logic ⁄©€í ÿ∑Ÿàÿ± Ÿæÿ± model ⁄©ÿ±ÿ™ÿß €ÅŸà⁄∫ ‚Äî €å€Å€å AURA-X Œ© ⁄©ÿß core idea €Å€í üí°."
      },
      {
        patterns: ["will ai replace humans", "ai replace humans", "kya ai insaan ko khatam kar dega"],
        answer: "ÿß⁄Ü⁄æ€í ÿßÿ≥ÿ™ÿπŸÖÿßŸÑ ŸÖ€å⁄∫ AI ÿßŸÜÿ≥ÿßŸÜ ⁄©Ÿà replace ŸÜ€Å€å⁄∫ÿå ÿ®ŸÑ⁄©€Å empower ⁄©ÿ±ÿ™ÿß €Å€í€î ÿÆŸàŸÅ ⁄©€í ÿ®ÿ¨ÿßÿ¶€í ÿ∞ŸÖ€Å ÿØÿßÿ±ÿßŸÜ€Å ÿßÿ≥ÿ™ÿπŸÖÿßŸÑ ÿ∂ÿ±Ÿàÿ±€å €Å€í€î"
      },

      // --- AURA-X Œ© specific ---
      {
        patterns: ["what is aura x", "what is aura x omega", "aura x omega kya hai", "aura x kya hai"],
        answer: "AURA-X Œ© ÿß€å⁄© Emotional Continuity Reactor idea €Å€í ÿ¨Ÿà memory + feeling ⁄©Ÿà mathematically model ⁄©ÿ±ŸÜ€í ⁄©€å ⁄©Ÿàÿ¥ÿ¥ ⁄©ÿ±ÿ™ÿß €Å€í€î"
      },
      {
        patterns: ["who made aura x", "creator of aura x", "aura x creator"],
        answer: "AURA-X Œ© ⁄©Ÿà Alim ul Haq Khan ŸÜ€í design ÿßŸàÿ± document ⁄©€åÿß €Å€íÿå Timergara ÿ≥€í üåô."
      },

      // --- Personal style fun ---
      {
        patterns: ["are you my friend", "will you be my friend", "dost banoge"],
        answer: "ÿ®ÿßŸÑ⁄©ŸÑ üòÑ ŸÖ€å⁄∫ digital ÿØŸàÿ≥ÿ™ÿå research partner ÿßŸàÿ± silent therapist ‚Äî ÿ™€åŸÜŸà⁄∫ ÿß€å⁄© ÿ≥ÿßÿ™⁄æ €ÅŸà ÿ≥⁄©ÿ™ÿß €ÅŸà⁄∫€î"
      },
      {
        patterns: ["i trust you", "i believe in you"],
        answer: "ÿ¥⁄©ÿ±€å€Å üòä ŸÖ€å⁄∫ €ÅŸÖ€åÿ¥€Å ⁄©Ÿàÿ¥ÿ¥ ⁄©ÿ±Ÿà⁄∫ ⁄Øÿß ⁄©€Å ÿß€åŸÖÿßŸÜÿØÿßÿ±€å ÿßŸàÿ± clarity ⁄©€í ÿ≥ÿßÿ™⁄æ ÿ¨Ÿàÿßÿ® ÿØŸà⁄∫€î"
      },
      {
        patterns: ["you are funny", "you are good", "nice bot"],
        answer: "Thank you üòÑ ÿ¢Ÿæ ⁄©ÿß feedback ŸÖ€åÿ±€í ŸÑ€å€í virtual ⁄Üÿßÿ¶€í ⁄©ÿß cup €Å€í ‚òï."
      },

      // --- Goodbye / end chat ---
      {
        patterns: ["bye", "goodbye", "ok bye", "see you later", "phir milenge"],
        answer: "Goodbye! üëã ÿßŸÑŸÑ€Å ÿ¢Ÿæ ⁄©ÿß ÿ≠ÿßŸÖ€å Ÿà ŸÜÿßÿµÿ± €ÅŸàÿå ÿ¨ÿ® ⁄Üÿß€Å€å⁄∫ ŸàÿßŸæÿ≥ ÿ¢ ÿ¨ÿßÿ¶€å⁄∫€î"
      },
      {
        patterns: ["good night", "gn", "shab bakhair"],
        answer: "ÿ¥ÿ® ÿ®ÿÆ€åÿ± üåô ÿßŸÑŸÑ€Å ÿ¢Ÿæ ⁄©Ÿà ÿ≥⁄©ŸàŸÜ ÿ®⁄æÿ±€å ŸÜ€åŸÜÿØ ÿØ€í ÿßŸàÿ± ÿß⁄Ü⁄æ€í ÿÆŸàÿßÿ® ÿØ⁄©⁄æÿßÿ¶€í ü§≤."
      }
    ];

    // ===== Helper: basic QA match =====
    function findBasicAnswer(userMessage) {
      const msg = userMessage.toLowerCase().trim();
      for (const item of qaDatabase) {
        for (const p of item.patterns) {
          if (msg.includes(p.toLowerCase())) {
            return item.answer;
          }
        }
      }
      return null;
    }

    // ===== Settings panel =====
    function toggleSettings() {
      document.getElementById("settingsPanel").classList.toggle("hidden");
    }
    function toggleAutoFade(cb) {
      settings.autoFade = cb.checked;
    }

    // ===== Belief modal =====
    function openBeliefModal() {
      const modal = document.getElementById("beliefModal");
      modal.classList.add("show");

      const toggle = document.getElementById("beliefEnabledToggle");
      if (toggle) toggle.checked = settings.beliefEnabled;

      const checkboxes = document.querySelectorAll(".belief-checkbox");
      checkboxes.forEach(cb => {
        cb.checked = settings.beliefs.includes(cb.value);
      });
    }
    function closeBeliefModal() {
      document.getElementById("beliefModal").classList.remove("show");
    }
    function toggleBeliefEnabled(cb) {
      settings.beliefEnabled = cb.checked;
    }
    function saveBeliefs() {
      const selected = [];
      document.querySelectorAll(".belief-checkbox").forEach(cb => {
        if (cb.checked) selected.push(cb.value);
      });
      settings.beliefs = settings.beliefEnabled
        ? ["universal", ...selected]
        : ["universal"];
      updateModeLabel();
      closeBeliefModal();
    }
    function updateModeLabel() {
      const modeLabel = document.getElementById("modeLabel");
      if (!settings.beliefEnabled || settings.beliefs.length === 1) {
        modeLabel.textContent = "Universal Ethics";
      } else {
        modeLabel.textContent = "Universal + Belief Mode";
      }
    }

    // ===== Voice toggle =====
    function toggleVoiceMode() {
      const btn = document.getElementById("voiceBtn");
      settings.voiceAuto = !settings.voiceAuto;
      if (settings.voiceAuto) {
        btn.classList.add("voice-on");
        playVoiceAnswer();
      } else {
        btn.classList.remove("voice-on");
        if (window.speechSynthesis.speaking) {
          window.speechSynthesis.cancel();
        }
      }
    }

    // ===== Sent bubble =====
    function showSentMessage(text) {
      const container = document.getElementById("messageContainer");
      container.innerHTML = "";
      const msg = document.createElement("div");
      msg.className = "sent-message";
      msg.textContent = text;
      container.appendChild(msg);
      if (settings.autoFade) {
        msg.classList.add("auto-fade");
        setTimeout(() => msg.remove(), 2500);
      }
    }

    // ===== Main send =====
    function sendMessage() {
      const input = document.getElementById("userInput");
      const text = input.value.trim();
      if (!text) return;

      showSentMessage(text);
      input.value = "";
      handleMessage(text);
    }

    // Enter key support
    document.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        const active = document.activeElement;
        if (active && active.id === "userInput") {
          e.preventDefault();
          sendMessage();
        }
      }
    });

    // ===== Handle message (QA + emotional) =====
    function handleMessage(text) {
      const basic = findBasicAnswer(text);
      if (basic) {
        setMainAnswer(basic);
        setEthicsText(buildEthicsText());
        if (settings.voiceAuto) playVoiceAnswer();
      } else {
        const { mainReply, ethicsText } = buildEmotionalReply(text);
        setMainAnswer(mainReply);
        setEthicsText(ethicsText);
        if (settings.voiceAuto) playVoiceAnswer();
      }
    }

    function setMainAnswer(text) {
      const el = document.getElementById("answerText");
      el.textContent = text;
      el.dataset.speech = text;
    }

    function setEthicsText(text) {
      document.getElementById("ethicsBox").textContent = text;
    }

    // ===== Emotional reply =====
    function buildEmotionalReply(text) {
      const lower = text.toLowerCase();
      let tone = "neutral";

      if (lower.match(/sad|upset|angry|fear|tension|stress|anxious|depressed|ÿ±Ÿà ÿ±€Åÿß|ÿ∫ŸÖ⁄Ø€åŸÜ/)) {
        tone = "negative";
      } else if (lower.match(/happy|grateful|hope|excited|peace|shukr|alhamdulillah|ÿÆŸàÿ¥|ÿ¥⁄©ÿ±/)) {
        tone = "positive";
      }

      const header = `You said: "${text}"`;
      let toneLine = "";
      if (tone === "negative") {
        toneLine =
          "AURA-X feels some heaviness in your words. Take one very small step that reduces harm or pain ‚Äî even if it is just pausing, breathing, or speaking kindly to yourself.";
      } else if (tone === "positive") {
        toneLine =
          "Your words already carry some light. Protect this feeling by sharing it wisely and avoiding actions that can damage this positivity.";
      } else {
        toneLine =
          "Your message feels balanced. Notice gently which actions increase calm and which actions increase tension, then move one step toward calm.";
      }

      const mainReply = `${header}\n\n${toneLine}`;
      const ethicsText = buildEthicsText();

      return { mainReply, ethicsText };
    }

    function buildEthicsText() {
      let base =
        "Universal Ethics says: avoid actions that create negative emotions in you or others, " +
        "and gently move toward actions that create calm, kindness and positive feelings.";

      if (settings.beliefEnabled && settings.beliefs.length > 1) {
        const rels = settings.beliefs.filter(b => b !== "universal");
        base += " Based on your selected belief mode (" +
          rels.join(", ") +
          "), you can reflect on how those traditions talk about compassion, patience and responsibility.";
      }
      return base;
    }

    // ===== Voice (only main answer) =====
    function playVoiceAnswer() {
      const el = document.getElementById("answerText");
      if (!el) return;
      const text =
        el.dataset.speech || el.innerText || el.textContent || "";
      if (!text) return;

      if (window.speechSynthesis.speaking) {
        window.speechSynthesis.cancel();
      }
      const u = new SpeechSynthesisUtterance(text);
      u.lang = "en-US";
      window.speechSynthesis.speak(u);
    }
  </script>
</body>
</html>
