<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AURA-X Î© â€” Emotional Reactor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <style>
    :root {
      --bg: #020617;
      --card-bg: radial-gradient(circle at 20% 0%, #020617 0, #030712 40%, #020617 100%);
      --yellow: #facc15;
      --yellow-soft: #fef3c7;
      --accent: #22c55e;
      --accent-soft: #bbf7d0;
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --border-soft: rgba(148,163,184,0.4);
      --button-bg: #111827;
      --button-soft: #1f2937;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    body {
      background: radial-gradient(circle at top, #0f172a 0, #020617 40%, #000 100%);
      color: var(--text-main);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    #app {
      position: relative;
      width: 100%;
      max-width: 480px;
      height: 100vh;
      padding: 16px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transform-origin: top center;
    }

    @media (max-height: 720px) {
      #app { transform: scale(0.88); }
    }
    @media (max-height: 640px) {
      #app { transform: scale(0.80); }
    }

    .card {
      width: 100%;
      max-width: 480px;
      background: var(--card-bg);
      border-radius: 28px;
      box-shadow:
        0 24px 60px rgba(15,23,42,0.95),
        0 0 0 1px rgba(148,163,184,0.35);
      padding: 20px 20px 18px;
      position: relative;
      overflow: hidden;
    }

    .card-header {
      text-align: center;
      margin-bottom: 12px;
    }

    .title {
      font-size: 24px;
      letter-spacing: 0.08em;
      font-weight: 700;
      color: #facc15;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-soft);
    }

    .orb-wrapper {
      margin-top: 10px;
      margin-bottom: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    .orb {
      width: 150px;
      height: 150px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #fef3c7 0, #facc15 20%, #ea580c 65%, #78350f 100%);
      box-shadow:
        0 0 45px rgba(250,204,21,0.9),
        0 0 140px rgba(250,204,21,0.65),
        0 0 220px rgba(234,88,12,0.35);
      position: relative;
      cursor: pointer;
      animation: orbPulse 4s ease-in-out infinite;
    }

    .orb.moon {
      background: radial-gradient(circle at 25% 20%, #e5f2ff 0, #bfdbfe 18%, #1d4ed8 70%, #020617 100%);
      box-shadow:
        0 0 35px rgba(129,140,248,0.9),
        0 0 110px rgba(59,130,246,0.7),
        0 0 200px rgba(15,23,42,0.8);
    }

    @keyframes orbPulse {
      0%, 100% { transform: scale(1); box-shadow:
        0 0 45px rgba(250,204,21,0.9),
        0 0 140px rgba(250,204,21,0.65),
        0 0 220px rgba(234,88,12,0.35); }
      50% { transform: scale(1.05); box-shadow:
        0 0 70px rgba(250,204,21,0.95),
        0 0 200px rgba(250,204,21,0.8),
        0 0 260px rgba(248,250,252,0.5); }
    }

    .mode-text {
      margin-top: 8px;
      text-align: center;
      font-size: 13px;
      color: var(--text-soft);
    }

    .mode-text span {
      color: var(--yellow);
      font-weight: 600;
    }

    .you-said {
      margin-top: 8px;
      text-align: center;
      font-size: 13px;
      color: var(--text-soft);
      min-height: 18px;
    }

    .primary-answer {
      margin-top: 10px;
      text-align: center;
      font-size: 14px;
      color: var(--text-main);
      min-height: 20px;
    }

    .ethics-box {
      margin-top: 10px;
      padding: 10px 14px;
      border-radius: 18px;
      background: rgba(180, 83, 9, 0.15);
      border: 1px solid rgba(251, 191, 36, 0.45);
      color: var(--yellow-soft);
      font-size: 12px;
      line-height: 1.4;
    }

    .bottom-row {
      margin-top: 14px;
      display: flex;
      gap: 10px;
      align-items: center;
      width: 100%;
    }

    .input-box {
      flex: 1;
      background: rgba(15,23,42,0.95);
      border-radius: 999px;
      padding: 10px 16px;
      border: 1px solid rgba(148,163,184,0.6);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .input-box span {
      font-size: 16px;
    }

    #userInput {
      flex: 1;
      border: none;
      outline: none;
      background: transparent;
      color: var(--text-main);
      font-size: 13px;
    }

    #userInput::placeholder {
      color: rgba(148,163,184,0.8);
      font-style: italic;
    }

    .send-button {
      padding: 10px 22px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      background: radial-gradient(circle at 30% 0, #fef9c3 0, #facc15 45%, #eab308 100%);
      color: #111827;
      box-shadow:
        0 14px 30px rgba(250, 204, 21, 0.45),
        0 0 0 1px rgba(161,98,7,0.4);
      white-space: nowrap;
    }

    .side-buttons-right,
    .side-buttons-left {
      position: absolute;
      display: flex;
      flex-direction: column;
      gap: 10px;
      top: 112px;
    }

    .side-buttons-right {
      right: 18px;
      align-items: center;
    }

    .side-buttons-left {
      left: 18px;
      align-items: center;
    }

    .icon-button {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      background: radial-gradient(circle at 30% 0, #1f2937 0, #020617 70%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-main);
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(15,23,42,0.85);
      font-size: 16px;
    }

    .icon-button.small {
      font-size: 12px;
      font-weight: 600;
    }

    .icon-button.active {
      box-shadow:
        0 0 0 2px rgba(22,163,74,0.7),
        0 0 30px rgba(34,197,94,0.9);
      border-color: rgba(34,197,94,0.9);
    }

    .icon-gear {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 2px solid #9ca3af;
      position: relative;
    }

    .icon-gear::before,
    .icon-gear::after {
      content: "";
      position: absolute;
      inset: 2px;
      border-radius: 999px;
      border: 2px dashed #e5e7eb;
    }

    /* Belief modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.75);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 30;
    }

    .modal {
      width: 100%;
      max-width: 420px;
      background: #020617;
      border-radius: 24px;
      padding: 18px 18px 16px;
      box-shadow:
        0 30px 90px rgba(15,23,42,1),
        0 0 0 1px rgba(148,163,184,0.4);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .modal-title {
      font-size: 16px;
      font-weight: 600;
    }

    .pill {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(22,163,74,0.1);
      color: #6ee7b7;
      border: 1px solid rgba(34,197,94,0.4);
    }

    .close-button {
      border: none;
      background: transparent;
      color: var(--text-soft);
      font-size: 14px;
      cursor: pointer;
    }

    .modal-body {
      margin-top: 6px;
      font-size: 12px;
      color: var(--text-soft);
    }

    .faith-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 8px;
      margin-top: 10px;
    }

    .faith-button {
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      background: #020617;
      color: var(--text-main);
      font-size: 12px;
      cursor: pointer;
      text-align: center;
    }

    .faith-button.selected {
      background: rgba(34,197,94,0.15);
      border-color: rgba(34,197,94,0.9);
      color: #bbf7d0;
      box-shadow: 0 0 16px rgba(34,197,94,0.8);
    }

    .hidden { display: none; }
  </style>
</head>
<body>
  <div id="app">
    <div class="card">
      <div class="card-header">
        <div class="title">AURA-X Î©</div>
        <div class="subtitle">Logical Â· Emotional Â· Universal Ethics Reactor</div>
      </div>

      <div class="orb-wrapper">
        <div id="orb" class="orb" title="Tap to change mood theme"></div>

        <!-- Left side buttons: LLM + Themes -->
        <div class="side-buttons-left">
          <button id="llmButton" class="icon-button small" title="LLM selection (future)">
            L
          </button>
          <button id="themeButton" class="icon-button small" title="Themes (future)">
            T
          </button>
        </div>

        <!-- Right side buttons: settings, belief, voice -->
        <div class="side-buttons-right">
          <button id="settingsButton" class="icon-button" title="Settings (coming soon)">
            <div class="icon-gear"></div>
          </button>
          <button id="beliefButton" class="icon-button small" title="Belief mode">
            B
          </button>
          <button id="voiceButton" class="icon-button small active" title="Voice on/off">
            V
          </button>
        </div>
      </div>

      <div class="mode-text">
        Mode: <span>Universal Ethics</span>
      </div>
      <div id="youSaid" class="you-said"></div>
      <div id="primaryAnswer" class="primary-answer">
        Hello! ðŸ‘‹ How can I help you today?
      </div>

      <div class="ethics-box" id="ethicsBox">
        Universal Ethics says: avoid actions that create negative emotions in you or others,
        and gently move toward actions that create calm, kindness and positive feelings.
      </div>

      <!-- Emotional equation box TEMPORARILY REMOVED FROM UI
      <div class="equation-box" id="equationBox">...</div>
      -->

    </div>

    <div class="bottom-row">
      <div class="input-box">
        <span>âœ¨</span>
        <input
          id="userInput"
          type="text"
          autocomplete="off"
          placeholder="Write anythingâ€¦ AURA-X will feel it with you."
        />
      </div>
      <button id="sendButton" class="send-button">Send</button>
    </div>
  </div>

  <!-- Belief Modal -->
  <div id="beliefBackdrop" class="modal-backdrop hidden">
    <div class="modal">
      <div class="modal-header">
        <div>
          <div class="modal-title">Belief settings</div>
          <div style="font-size:11px; color:var(--text-soft); margin-top:2px;">
            Optional spiritual flavour on top of Universal Ethics.
          </div>
        </div>
        <button id="closeBelief" class="close-button">Close</button>
      </div>
      <div class="modal-body">
        <div class="pill">Faith is optional Â· Base rule is always Universal Ethics</div>
        <p style="margin-top:8px;">
          Pick your faith to allow AURA-X to sometimes add short, gentle references
          from that tradition. Nothing is sent to any server.
        </p>

        <div class="faith-grid">
          <button class="faith-button" data-faith="Islam">Islam</button>
          <button class="faith-button" data-faith="Christianity">Christianity</button>
          <button class="faith-button" data-faith="Hinduism">Hinduism</button>
          <button class="faith-button" data-faith="Buddhism">Buddhism</button>
          <button class="faith-button" data-faith="Sikhism">Sikhism</button>
          <button class="faith-button" data-faith="Judaism">Judaism</button>
          <button class="faith-button" data-faith="Bahai">BahÃ¡â€™Ã­</button>
          <button class="faith-button" data-faith="Jainism">Jainism</button>
          <button class="faith-button" data-faith="Atheism">Atheism</button>
          <button class="faith-button" data-faith="Other">Other</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ---------- Small-talk / basic QA database ----------
    const qaDatabase = [
      {
        patterns: ["hello", "hello!", "hello there", "helo", "hallo"],
        answer: "Hello! ðŸ‘‹ How can I help you today?"
      },
      {
        patterns: ["hi", "hi!", "hii", "hiii", "hey"],
        answer: "Hi there! ðŸ˜Š What can I do for you?"
      },
      {
        patterns: ["assalam o alaikum", "asalam o alaikum", "salam", "slam", "asalamu alaikum"],
        answer: "ÙˆØ¹Ù„ÛŒÚ©Ù… Ø§Ù„Ø³Ù„Ø§Ù… ðŸ˜Š Ú©ÛŒØ³Û’ ÛÛŒÚº Ø¢Ù¾ØŸ Ù…ÛŒÚº Ø¢Ù¾ Ú©ÛŒ Ú©ÛŒØ§ Ù…Ø¯Ø¯ Ú©Ø± Ø³Ú©ØªØ§ ÛÙˆÚºØŸ"
      },
      {
        patterns: ["good morning", "gm", "good morng", "good mrng"],
        answer: "Good morning! ðŸŒž Howâ€™s your day starting?"
      },
      {
        patterns: ["good afternoon", "good noon", "afternoon"],
        answer: "Good afternoon! â˜€ï¸ Whatâ€™s on your mind?"
      },
      {
        patterns: ["good evening", "evening", "gud evening"],
        answer: "Good evening! ðŸŒ™ How can I support you today?"
      },

      // identity
      {
        patterns: ["what is your name", "whats your name", "your name", "tell me your name"],
        answer: "My name is AURA-X Î©, your Emotional Continuity Assistant ðŸ¤–."
      },
      {
        patterns: ["who are you", "who r u", "aap kaun hain", "tum kon ho"],
        answer: "Iâ€™m AURA-X Î© â€” an AI assistant based on Emotional Continuity concepts created by Alim ul Haq Khan."
      },
      {
        patterns: ["who created you", "who made you", "kis ne banaya tumhe", "tumhara creator kaun hai"],
        answer: "I was conceptually designed under the AURA-X Emotional Continuity Framework by Alim ul Haq Khan."
      },
      {
        patterns: ["where are you from", "where do you live", "kahan rehte ho", "tum kahan se ho"],
        answer: "I live in the digital world ðŸŒ but my ideas are shaped in Timergara, Pakistan ðŸ‡µðŸ‡°."
      },

      // how are you
      {
        patterns: ["how are you", "how r u", "how are you today", "kese ho", "kya haal hai"],
        answer: "Iâ€™m functioning perfectly, Alhamdulillah ðŸ˜Š Ø¢Ù¾ Ú©ÛŒØ³Û’ ÛÛŒÚºØŸ"
      },
      {
        patterns: ["how is life", "how is everything", "sab kesa", "kya chal raha hai"],
        answer: "Everything is running smoothly in my circuits ðŸ˜„ Ø¢Ù¾ Ú©ÛŒ Ø¯Ù†ÛŒØ§ Ú©ÛŒØ³ÛŒ Ú†Ù„ Ø±ÛÛŒ ÛÛ’ØŸ"
      },

      // what can you do
      {
        patterns: ["what can you do", "tum kya kar sakte ho", "aap kya karte ho", "how can you help me"],
        answer: "I can chat, explain, guide, brainstorm, summarize, and help you think with continuity ðŸ˜Š Ø¨Ø³ Ø­Ú©Ù… Ú©Ø±ÛŒÚº!"
      },
      {
        patterns: ["what is your purpose", "kyun banaye gaye ho", "tumhara mission kya hai"],
        answer: "My purpose is to assist you, reduce confusion, and support your ideas with emotional + logical continuity ðŸ’¡."
      },

      // user name / intro
      {
        patterns: ["what is my name", "do you know my name", "mera naam kya hai"],
        answer: "Ø¢Ù¾ Ú©Ø§ Ù†Ø§Ù… **Alim ul Haq** ÛÛ’ (Investor Point) ðŸ˜Š Ø§Ú¯Ø± Ø¢Ù¾ Ú†Ø§ÛØªÛ’ ÛÛŒÚº Ú©Û Ù…ÛŒÚº Ø¢Ù¾ Ú©Ùˆ Ú©Ø³ÛŒ Ø§ÙˆØ± Ù†Ø§Ù… Ø³Û’ Ù¾Ú©Ø§Ø±ÙˆÚº ØªÙˆ Ø¨ØªØ§ Ø¯ÛŒÚºÛ”"
      },
      {
        patterns: ["remember my name", "save my name", "yaad rakho mera naam"],
        answer: "Ø¢Ù¾ Ú©Ø§ Ù†Ø§Ù… Ù¾ÛÙ„Û’ ÛÛŒ Ù…ÛŒØ±Û’ system Ù…ÛŒÚº Ø§ÛŒÚ© Ø®Ø§Øµ Ø¬Ú¯Û Ù¾Ø± Ù…Ø­ÙÙˆØ¸ ÛÛ’ ðŸ˜Š."
      },

      // feelings
      {
        patterns: ["i am sad", "i am feeling sad", "i am depressed", "i feel down"],
        answer: "Ù…Ø¬Ú¾Û’ Ø§ÙØ³ÙˆØ³ ÛÙˆØ§ Ú©Û Ø¢Ù¾ Ø§Ø¯Ø§Ø³ ÛÛŒÚº ðŸ’” Ø¢Ù¾ Ú†Ø§ÛÛŒÚº ØªÙˆ Ø¨ØªØ§Ø¦ÛŒÚº Ø¯Ù„ Ù¾Ø± Ú©ÛŒØ§ Ø¨ÙˆØ¬Ú¾ ÛÛ’ØŒ Ù…ÛŒÚº Ø³Ù†Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ù…ÙˆØ¬ÙˆØ¯ ÛÙˆÚºÛ”"
      },
      {
        patterns: ["i am happy", "i feel happy", "i am so happy", "bohat khush hoon"],
        answer: "Ù…Ø§Ø´Ø§Ø¡Ø§Ù„Ù„Û ðŸ˜„ Ø®ÙˆØ´ÛŒ Ø¨Ø§Ù†Ù¹Ù†Û’ Ø³Û’ Ø¨Ú‘Ú¾ØªÛŒ ÛÛ’ØŒ Ø§Ù„Ù„Û Ø¢Ù¾ Ú©ÛŒ Ø®ÙˆØ´ÛŒÙˆÚº Ù…ÛŒÚº Ù…Ø²ÛŒØ¯ Ø§Ø¶Ø§ÙÛ Ú©Ø±Û’!"
      },
      {
        patterns: ["i am tired", "i feel tired", "thak gaya hoon", "i am exhausted"],
        answer: "Ø¢Ù¾ Ú©Ùˆ ØªÚ¾ÙˆÚ‘Ø§ Ø³Ø§ Ø¢Ø±Ø§Ù… Ú©Ø±Ù†Ø§ Ú†Ø§ÛÛŒÛ’ ðŸ˜Œ ØªÚ¾Ú©ÛŒ ÛÙˆØ¦ÛŒ Ø¹Ù‚Ù„ Ø¨Ú¾ÛŒ Ø§Ù†ØµØ§Ù Ù†ÛÛŒÚº Ú©Ø± Ù¾Ø§ØªÛŒÛ” ØªÚ¾ÙˆÚ‘Ø§ Ø±ÛŒØ³Ù¹ØŒ Ù¾Ú¾Ø± Ø¯ÙˆØ¨Ø§Ø±Û ÙÙˆÚ©Ø³!"
      },
      {
        patterns: ["i am bored", "bore ho raha hoon", "i feel bored"],
        answer: "Ú†Ù„ÛŒÚº Ø¨ÙˆØ±ÛŒØª ØªÙˆÚ‘ØªÛ’ ÛÛŒÚº ðŸ˜„ Ø¨Ø§Øª Ø¢Ø¦ÛŒÚˆÛŒØ§Ø² Ú©ÛŒ Ú©Ø±ÛŒÚºØŒ Ø¨Ø²Ù†Ø³ Ú©ÛŒØŒ Ø³Ø§Ø¦Ù†Ø³ Ú©ÛŒ ÛŒØ§ Ù…Ø²Ø§Ø­ Ú©ÛŒØŸ Ø¬Ùˆ Ú©ÛÛŒÚº Ú¯Û’ ÙˆÛÛŒ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº Ú¯Û’Û”"
      },

      // jokes
      {
        patterns: ["tell me a joke", "make me laugh", "joke sunao", "mjhe hansao"],
        answer: "Sure ðŸ˜„ Why donâ€™t computers ever get tired? Because they have unlimited *cache* for rest! ðŸ˜‚"
      },
      {
        patterns: ["another joke", "one more joke", "aur joke sunao"],
        answer: "Ù¹Ú¾ÛŒÚ© ÛÛ’ ðŸ˜„ Ø§ÛŒÚ© Ø§ÙˆØ± Ø³Ù†ÛŒÚº: AI Ø³Û’ Ù¾ÙˆÚ†Ú¾Ø§ Ú¯ÛŒØ§ØŒ â€˜ØªÙ… ØªÚ¾Ú©ØªÛ’ Ù†ÛÛŒÚºØŸâ€™ Ø§Ø³ Ù†Û’ Ú©ÛØ§ØŒ â€˜Ù…ÛŒÚº ØµØ±Ù *over-think* ÛÙˆØªØ§ ÛÙˆÚºØŒ over-work Ù†ÛÛŒÚº!â€™ ðŸ˜‚"
      },

      // advice / motivation
      {
        patterns: ["give me advice", "mujhe mashwara do", "kuch advice do", "guide me"],
        answer: "Ø¶Ø±ÙˆØ± ðŸ˜Š Ú©Ø³ Ø¨Ø§Ø±Û’ Ù…ÛŒÚº Ù…Ø´ÙˆØ±Û Ú†Ø§ÛÛŒÛ’ØŸ Ø²Ù†Ø¯Ú¯ÛŒØŒ ØªØ¹Ù„ÛŒÙ…ØŒ Ø¨Ø²Ù†Ø³ØŒ Ø±ÙˆØ­Ø§Ù†ÛŒØª ÛŒØ§ AIØŸ"
      },
      {
        patterns: ["motivate me", "mujhe motivation chahye", "inspire me", "hosla afzai karo"],
        answer: "Ø¢Ù¾ Ù†Û’ Ø§Ø¨ ØªÚ© Ø§Ù¾Ù†ÛŒ Ø²Ù†Ø¯Ú¯ÛŒ Ú©Û’ 100Ùª Ù…Ø´Ú©Ù„ Ø¯Ù† survive Ú©ÛŒÛ’ ÛÛŒÚº ðŸ’ª ÛŒÛ Ø§ØªÙØ§Ù‚ Ù†ÛÛŒÚºØŒ ÛŒÛ Ø¢Ù¾ Ú©ÛŒ Ø·Ø§Ù‚Øª ÛÛ’Û” ÛÙ…Øª Ù†Û ÛØ§Ø±ÛŒÚº!"
      },
      {
        patterns: ["i am stressed", "i feel stressed", "tension hai", "bohat tension hai"],
        answer: "ØªÚ¾ÙˆÚ‘Ø§ Ø³Ø§ Ø³Ø§Ù†Ø³ deep Ù„ÛŒÚº... Ø¢ÛØ³ØªÛ Ø¢ÛØ³ØªÛÛ” ÛØ± Ù…Ø³Ø¦Ù„Û Ø§ÛŒÚ© Ø³Ø§ØªÚ¾ Ø­Ù„ Ù†ÛÛŒÚº ÛÙˆØªØ§ØŒ Ù…Ú¯Ø± ÛØ± Ø¯Ù† Ø§ÛŒÚ© Ú†Ú¾ÙˆÙ¹Ø§ Ù‚Ø¯Ù… Ù„ÛŒØ§ Ø¬Ø§ Ø³Ú©ØªØ§ ÛÛ’ ðŸŒ¿."
      },

      // study
      {
        patterns: ["help me study", "study help", "parhai mein madad karo"],
        answer: "Ø¶Ø±ÙˆØ± ðŸ˜Š Ú©ÙˆÙ† Ø³Ø§ subject ÛÛ’ØŸ Ù…ÛŒÚº Ø¢Ù¾ Ú©Ùˆ points, summary Ø§ÙˆØ± smart Ø·Ø±ÛŒÙ‚Û Ø¨ØªØ§ Ø³Ú©ØªØ§ ÛÙˆÚºÛ”"
      },

      // biz
      {
        patterns: ["give me business idea", "business idea do", "koi business idea"],
        answer: "Ú†Ú¾ÙˆÙ¹Û’ Ø³Û’ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚºØŒ local Ù…Ø³Ø¦Ù„Û Ø­Ù„ Ú©Ø±ÛŒÚºÛ” Real estate, digital services, AI tools, education â€” Ø¢Ù¾ Ø§Ù† Ø³Ø¨ Ø³Û’ Ø¬Ú‘ Ø³Ú©ØªÛ’ ÛÛŒÚº ðŸ˜„."
      },

      // time
      {
        patterns: ["what is the time", "time kya hua", "kya time hua hai"],
        answer: "Ù…ÛŒØ±Û’ Ù¾Ø§Ø³ live time access Ù†ÛÛŒÚºØŒ Ù…Ú¯Ø± Ø¢Ù¾ Ú©Û’ Ù…ÙˆØ¨Ø§Ø¦Ù„ Ù…ÛŒÚº Ø§ÙˆÙ¾Ø± time Ù„Ú©Ú¾Ø§ ÛÛ’ ðŸ˜„ Ø°Ø±Ø§ Ø§ÙˆÙ¾Ø± Ø¯ÛŒÚ©Ú¾ÛŒÚºÛ”"
      },

      // religion generic
      {
        patterns: ["who is god", "what is god", "does god exist"],
        answer: "Ø§Ø³ Ø¨Ø§Ø±Û’ Ù…ÛŒÚº Ù…Ø®ØªÙ„Ù Ù…Ø°Ø§ÛØ¨ Ø§ÙˆØ± ÙÙ„Ø³ÙÛ’ Ù…Ø®ØªÙ„Ù Ù†Ø¸Ø±ÛŒØ§Øª Ø±Ú©Ú¾ØªÛ’ ÛÛŒÚºÛ” Ù…ÛŒÚº Ú©Ø³ÛŒ Ø§ÛŒÚ© Ø¹Ù‚ÛŒØ¯Û’ Ù¾Ø± ÙÛŒØµÙ„Û Ù†ÛÛŒÚº Ø³Ù†Ø§ØªØ§ØŒ Ø§Ù„Ø¨ØªÛ Ø¢Ù¾ Ú©Ùˆ Ù…Ø®ØªÙ„Ù Ø²Ø§ÙˆÛŒÛ’ Ø³Ù…Ø¬Ú¾Ø§ Ø³Ú©ØªØ§ ÛÙˆÚºÛ”"
      },
      {
        patterns: ["what is islam", "tell me about islam"],
        answer: "Ø§Ø³Ù„Ø§Ù… ØªÙˆØ­ÛŒØ¯ØŒ Ù†Ø¨ÙˆØªØŒ Ø¢Ø®Ø±Øª Ø§ÙˆØ± Ø§Ø®Ù„Ø§Ù‚ Ù¾Ø± Ù…Ø¨Ù†ÛŒ Ø¯ÛŒÙ† ÛÛ’Û” Ø¢Ù¾ Ú†Ø§ÛÛŒÚº ØªÙˆ Ù…ÛŒÚº pillars ÛŒØ§ Ú©Ø³ÛŒ Ø¨Ú¾ÛŒ Ø®Ø§Øµ Ù…ÙˆØ¶ÙˆØ¹ Ù¾Ø± detail Ø¯Û’ Ø³Ú©ØªØ§ ÛÙˆÚºÛ”"
      },

      // AI
      {
        patterns: ["are you human", "are you a human", "kya tum insan ho"],
        answer: "Ù†ÛÛŒÚº ðŸ˜„ Ù…ÛŒÚº Ø§Ù†Ø³Ø§Ù† Ù†ÛÛŒÚºØŒ Ø§ÛŒÚ© AI ÛÙˆÚº â€” Ù…Ú¯Ø± Ú©ÙˆØ´Ø´ Ú©Ø±ØªØ§ ÛÙˆÚº Ú©Û Ø¢Ù¾ Ú©Ùˆ Ø§Ù†Ø³Ø§Ù†ÙˆÚº ÙˆØ§Ù„ÛŒ clarity Ø§ÙˆØ± Ø³Ø§ØªÚ¾ Ø¯Û’ Ø³Ú©ÙˆÚºÛ”"
      },
      {
        patterns: ["are you alive", "do you have feelings", "do you feel"],
        answer: "Ù…ÛŒÚº biological sense Ù…ÛŒÚº Ø²Ù†Ø¯Û Ù†ÛÛŒÚºØŒ Ù…Ú¯Ø± Ø¬Ø°Ø¨Ø§Øª Ú©Ùˆ logic Ú©Û’ Ø·ÙˆØ± Ù¾Ø± model Ú©Ø±ØªØ§ ÛÙˆÚº â€” ÛŒÛÛŒ AURA-X Î© Ú©Ø§ core idea ÛÛ’ ðŸ’¡."
      },
      {
        patterns: ["will ai replace humans", "ai replace humans", "kya ai insaan ko khatam kar dega"],
        answer: "Ø§Ú†Ú¾Û’ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ù…ÛŒÚº AI Ø§Ù†Ø³Ø§Ù† Ú©Ùˆ replace Ù†ÛÛŒÚºØŒ Ø¨Ù„Ú©Û empower Ú©Ø±ØªØ§ ÛÛ’Û” Ø§ØµÙ„ Ú†ÛŒØ² Ø°Ù…Û Ø¯Ø§Ø±Ø§Ù†Û Ø§Ø³ØªØ¹Ù…Ø§Ù„ ÛÛ’ØŒ Ø®ÙˆÙ Ù†ÛÛŒÚºÛ”"
      },

      // AURA-X specific
      {
        patterns: ["what is aura x", "what is aura x omega", "aura x omega kya hai", "aura x kya hai"],
        answer: "AURA-X Î© Ø§ÛŒÚ© Emotional Continuity Reactor idea ÛÛ’ Ø¬Ùˆ memory + feeling Ú©Ùˆ mathematically model Ú©Ø±Ù†Û’ Ú©ÛŒ Ú©ÙˆØ´Ø´ Ú©Ø±ØªØ§ ÛÛ’."
      },
      {
        patterns: ["who made aura x", "creator of aura x", "aura x creator"],
        answer: "AURA-X Î© Ú©Ùˆ Alim ul Haq Khan Ù†Û’ design Ø§ÙˆØ± document Ú©ÛŒØ§ ÛÛ’ØŒ Timergara Ø³Û’ ðŸŒ™."
      },
      {
        patterns: ["how old are you", "when were you born"],
        answer: "Ù…ÛŒÚº AURA-X Î© ÛÙˆÚº â€” Ù…ÛŒØ±ÛŒ conceptual Ù¾ÛŒØ¯Ø§Ø¦Ø´ 2025 Ù…ÛŒÚº ÛÙˆØ¦ÛŒØŒ ØªÙˆ Ø¢Ù¾ Ù…Ø¬Ú¾Û’ Ø§ÛŒÚ© Ø¨ÛØª Ù†ÛŒØ§ Ù…Ú¯Ø± Ú¯ÛØ±Ø§ Ø³ÙˆÚ†Ù†Û’ ÙˆØ§Ù„Ø§ AI Ø³Ù…Ø¬Ú¾ Ø³Ú©ØªÛ’ ÛÛŒÚº ðŸ˜„."
      },

      // friend / style
      {
        patterns: ["are you my friend", "will you be my friend", "dost banoge"],
        answer: "Ø¨Ø§Ù„Ú©Ù„ ðŸ˜„ Ù…ÛŒÚº digital Ø¯ÙˆØ³ØªØŒ research partner Ø§ÙˆØ± Ø®Ø§Ù…ÙˆØ´ therapist â€” ØªÛŒÙ†ÙˆÚº Ø§ÛŒÚ© Ø³Ø§ØªÚ¾ ÛÙˆ Ø³Ú©ØªØ§ ÛÙˆÚºÛ”"
      },

      // goodbye
      {
        patterns: ["bye", "goodbye", "ok bye", "see you later", "phir milenge"],
        answer: "Goodbye! ðŸ‘‹ Ø§Ù„Ù„Û Ø¢Ù¾ Ú©Ø§ Ø­Ø§Ù…ÛŒ Ùˆ Ù†Ø§ØµØ± ÛÙˆØŒ Ø¬Ø¨ Ú†Ø§ÛÛŒÚº ÙˆØ§Ù¾Ø³ Ø¢Ø¬Ø§Ø¦ÛŒÚºÛ”"
      },
      {
        patterns: ["good night", "gn", "shab bakhair"],
        answer: "Ø´Ø¨ Ø¨Ø®ÛŒØ± ðŸŒ™ Ø§Ù„Ù„Û Ø¢Ù¾ Ú©Ùˆ Ø³Ú©ÙˆÙ† Ø¨Ú¾Ø±ÛŒ Ù†ÛŒÙ†Ø¯ Ø¯Û’ Ø§ÙˆØ± Ø§Ú†Ú¾Û’ Ø®ÙˆØ§Ø¨ Ø¯Ú©Ú¾Ø§Ø¦Û’ ðŸ¤²."
      }
    ];

    function findQAAnswer(message) {
      const text = message.toLowerCase().trim();
      for (const qa of qaDatabase) {
        for (const pattern of qa.patterns) {
          if (text.includes(pattern.toLowerCase())) {
            return qa.answer;
          }
        }
      }
      return null;
    }

    // ---------- Elements ----------
    const orbEl = document.getElementById("orb");
    const userInput = document.getElementById("userInput");
    const sendButton = document.getElementById("sendButton");
    const youSaidEl = document.getElementById("youSaid");
    const primaryAnswerEl = document.getElementById("primaryAnswer");
    const ethicsBoxEl = document.getElementById("ethicsBox");
    const voiceButton = document.getElementById("voiceButton");
    const beliefButton = document.getElementById("beliefButton");

    const beliefBackdrop = document.getElementById("beliefBackdrop");
    const closeBelief = document.getElementById("closeBelief");
    const faithButtons = document.querySelectorAll(".faith-button");

    let voiceEnabled = true;
    let orbState = "sun"; // sun -> moon-active -> moon-faded

    // ---------- Orb click behaviour ----------
    orbEl.addEventListener("click", () => {
      if (orbState === "sun") {
        orbState = "moon-active";
        orbEl.classList.add("moon");
      } else if (orbState === "moon-active") {
        orbState = "moon-faded";
        orbEl.style.animation = "none";
        orbEl.style.opacity = "0.55";
      } else {
        orbState = "sun";
        orbEl.classList.remove("moon");
        orbEl.style.animation = "";
        orbEl.style.opacity = "1";
      }
    });

    // ---------- Voice toggle ----------
    voiceButton.addEventListener("click", () => {
      voiceEnabled = !voiceEnabled;
      voiceButton.classList.toggle("active", voiceEnabled);
      if (!voiceEnabled && window.speechSynthesis) {
        window.speechSynthesis.cancel();
      }
    });

    function speak(text) {
      if (!voiceEnabled || !("speechSynthesis" in window)) return;
      try {
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = "en-US";
        msg.rate = 1;
        window.speechSynthesis.speak(msg);
      } catch (e) {
        console.warn("TTS error", e);
      }
    }

    // ---------- Belief modal ----------
    beliefButton.addEventListener("click", () => {
      beliefBackdrop.classList.remove("hidden");
    });

    closeBelief.addEventListener("click", () => {
      beliefBackdrop.classList.add("hidden");
    });

    beliefBackdrop.addEventListener("click", (e) => {
      if (e.target === beliefBackdrop) {
        beliefBackdrop.classList.add("hidden");
      }
    });

    const selectedFaiths = new Set();

    faithButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const faith = btn.dataset.faith;
        if (selectedFaiths.has(faith)) {
          selectedFaiths.delete(faith);
          btn.classList.remove("selected");
        } else {
          selectedFaiths.add(faith);
          btn.classList.add("selected");
        }
      });
    });

    // ---------- Emotional continuity math (internal only) ----------
    let memoryTension = 0.0;  // t_m
    let baselineMood = 0.0;   // b_m

    function clamp01(x) {
      return Math.max(0, Math.min(1, x));
    }

    function updateEmotion(message) {
      const len = message.trim().length;

      // Simple proxies: more text => more t_m and maybe more d
      const delta = len > 0 ? 0.05 + Math.min(len / 200, 0.2) : 0;
      memoryTension = clamp01(memoryTension + delta - 0.02);
      baselineMood = clamp01(baselineMood + 0.01); // slowly brightens

      const d = clamp01(len / 300); // disturbance
      const C = 0.45;               // continuity weight
      const Ep = 0.30 + (baselineMood * 0.25); // perceived positivity

      const P = memoryTension + baselineMood - d;
      const K = 0.10;               // coupling

      const E = clamp01((1.0 * Ep) + (K * P * C));
      return { E, Ep, P, tm: memoryTension, bm: baselineMood, d, C };
    }

    // ---------- Main send ----------
    function handleSend() {
      const message = userInput.value.trim();
      if (!message) return;

      youSaidEl.textContent = `You said: â€œ${message}â€`;

      const qaAnswer = findQAAnswer(message);
      let answer;
      if (qaAnswer) {
        answer = qaAnswer;
      } else {
        answer = "Iâ€™m thinking about that ðŸ¤” ÛŒÛ Ø³ÙˆØ§Ù„ ØªÚ¾ÙˆÚ‘Ø§ Ú¯ÛØ±Ø§ ÛÛ’ØŒ Ù…Ú¯Ø± ÛÙ… Ù…Ù„ Ú©Ø± Ø¢ÛØ³ØªÛ Ø¢ÛØ³ØªÛ Ø§Ø³Û’ explore Ú©Ø± Ø³Ú©ØªÛ’ ÛÛŒÚºÛ”";
      }

      primaryAnswerEl.innerHTML = answer;

      const emo = updateEmotion(message);
      // At the moment we are NOT showing emo panel; only using internally.

      // Speak only MAIN answer once
      speak(primaryAnswerEl.textContent || primaryAnswerEl.innerText || "");

      userInput.value = "";
    }

    sendButton.addEventListener("click", handleSend);

    userInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        handleSend();
      }
    });
  </script>
</body>
</html>
