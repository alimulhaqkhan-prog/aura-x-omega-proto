<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AURA-X Œ© ‚Äì Emotional Reactor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <style>
    /* ===== Base Layout ===== */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    body {
      background: #020617;
      color: #e5e7eb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    #app {
      position: relative;
      width: 100%;
      max-width: 480px;
      height: 100vh;
      box-sizing: border-box;
      padding: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transform-origin: top center;
    }

    @media (max-height: 720px) { #app { transform: scale(0.9); } }
    @media (max-height: 640px) { #app { transform: scale(0.85); } }

    .hidden { display: none; }

    /* ===== Main Card ===== */
    .card {
      position: relative;
      background: radial-gradient(circle at top, #0b1220 0, #020617 55%, #020617 100%);
      border-radius: 32px;
      padding: 24px 20px 20px 20px;
      box-shadow:
        0 20px 40px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(148, 163, 184, 0.35);
      width: 100%;
      max-width: 480px;
      box-sizing: border-box;
    }

    .card-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .title {
      font-size: 24px;
      letter-spacing: 0.12em;
      color: #facc15;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 12px;
      color: #9ca3af;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    /* ===== Sun / Moon Core ===== */
    .core-wrapper {
      display: flex;
      justify-content: center;
      margin: 10px 0 6px 0;
    }

    .core-orb {
      width: 120px;
      height: 120px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #fde68a 0, #fbbf24 30%, #d97706 70%, #92400e 100%);
      box-shadow:
        0 0 60px rgba(251, 191, 36, 0.85),
        0 0 120px rgba(251, 191, 36, 0.45);
      animation: pulseOrb 4s ease-in-out infinite;
      cursor: pointer;
    }

    .core-orb.moon {
      background: radial-gradient(circle at 30% 30%, #e5e7eb 0, #9ca3af 30%, #4b5563 70%, #020617 100%);
      box-shadow:
        0 0 45px rgba(148, 163, 184, 0.8),
        0 0 90px rgba(55, 65, 81, 0.6);
    }

    .core-orb.moon-static {
      animation: none;
      box-shadow:
        0 0 25px rgba(148, 163, 184, 0.40),
        0 0 48px rgba(55, 65, 81, 0.25);
    }

    @keyframes pulseOrb {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.06); opacity: 0.95; }
    }

    .mode-line {
      text-align: center;
      font-size: 13px;
      color: #e5e7eb;
      margin-bottom: 6px;
    }

    .mode-line span {
      color: #facc15;
      font-weight: 600;
    }

    .you-said {
      text-align: center;
      font-size: 13px;
      color: #e5e7eb;
      margin-bottom: 10px;
      min-height: 18px;
    }

    .main-answer {
      text-align: center;
      font-size: 14px;
      color: #f9fafb;
      margin-bottom: 10px;
      min-height: 36px;
    }

    .ethics-box {
      margin-top: 4px;
      margin-bottom: 10px;
      background: rgba(234, 179, 8, 0.12);
      border-radius: 18px;
      padding: 10px 12px;
      font-size: 13px;
      color: #facc15;
      border: 1px solid rgba(250, 204, 21, 0.35);
    }

    /* ===== Equation Box ===== */
    .equation-box {
      margin-top: 4px;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 20px;
      padding: 10px 12px 12px 12px;
      font-size: 11px;
      color: #e5e7eb;
      border: 1px dashed rgba(148, 163, 184, 0.65);
      line-height: 1.4;
    }

    .equation-title {
      font-weight: 600;
      letter-spacing: 0.08em;
      color: #9ca3af;
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    /* ===== Side Buttons ===== */
    .side-buttons-right,
    .side-buttons-left {
      position: absolute;
      top: 120px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .side-buttons-right {
      right: 18px;
    }

    .side-buttons-left {
      left: 18px;
    }

    .icon-button {
      width: 42px;
      height: 42px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: radial-gradient(circle at 30% 20%, #1f2937 0, #020617 75%);
      color: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.18s ease-out;
      font-size: 16px;
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.9),
        0 10px 18px rgba(15, 23, 42, 0.85);
    }

    .icon-button:hover {
      transform: translateY(-1px) scale(1.03);
      box-shadow:
        0 0 0 1px rgba(148, 163, 184, 0.8),
        0 14px 22px rgba(15, 23, 42, 1);
    }

    .icon-button.active {
      border-color: #22c55e;
      box-shadow:
        0 0 0 1px rgba(34, 197, 94, 0.6),
        0 0 20px rgba(34, 197, 94, 0.45);
    }

    .icon-label {
      font-size: 15px;
      font-weight: 600;
    }

    .gear-icon {
      font-size: 20px;
    }

    /* ===== Input Row ===== */
    .input-row {
      width: 100%;
      max-width: 480px;
      margin-top: 10px;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .input-box {
      flex: 1;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      padding: 10px 16px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      display: flex;
      align-items: center;
      font-size: 14px;
      color: #e5e7eb;
    }

    .input-box input {
      border: none;
      outline: none;
      background: transparent;
      color: inherit;
      width: 100%;
      font-size: 14px;
    }

    .input-placeholder {
      color: #9ca3af;
      font-style: italic;
    }

    .send-button {
      border: none;
      cursor: pointer;
      background: radial-gradient(circle at 30% 20%, #fde047 0, #fbbf24 45%, #eab308 100%);
      color: #111827;
      font-weight: 700;
      font-size: 14px;
      padding: 10px 22px;
      border-radius: 999px;
      box-shadow:
        0 0 40px rgba(250, 204, 21, 0.65),
        0 8px 24px rgba(180, 83, 9, 0.85);
      transition: all 0.16s ease-out;
      white-space: nowrap;
    }

    .send-button:active {
      transform: translateY(1px) scale(0.98);
      box-shadow:
        0 0 26px rgba(250, 204, 21, 0.55),
        0 5px 16px rgba(180, 83, 9, 0.8);
    }

    .sparkle {
      margin-right: 6px;
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="card">
      <div class="card-header">
        <div class="title">AURA-X Œ©</div>
        <div class="subtitle">Logical ¬∑ Emotional ¬∑ Universal Ethics Reactor</div>
      </div>

      <!-- Side buttons LEFT (L, T) -->
      <div class="side-buttons-left">
        <button id="llmButton" class="icon-button" title="LLM selection (future)">
          <span class="icon-label">L</span>
        </button>
        <button id="themeButton" class="icon-button" title="Theme selector (future)">
          <span class="icon-label">T</span>
        </button>
      </div>

      <!-- Side buttons RIGHT (Settings, B, V) -->
      <div class="side-buttons-right">
        <button id="settingsButton" class="icon-button" title="Settings">
          <span class="gear-icon">‚öôÔ∏è</span>
        </button>
        <button id="beliefButton" class="icon-button" title="Belief mode (future)">
          <span class="icon-label">B</span>
        </button>
        <button id="voiceButton" class="icon-button active" title="Voice ON/OFF">
          <span class="icon-label">V</span>
        </button>
      </div>

      <!-- Sun / Moon core -->
      <div class="core-wrapper">
        <div id="coreOrb" class="core-orb"></div>
      </div>

      <div class="mode-line">
        Mode: <span id="modeLabel">Universal Ethics</span>
      </div>

      <div id="youSaid" class="you-said"></div>
      <div id="mainAnswer" class="main-answer">Hello! üëã How can I help you today?</div>

      <div id="ethicsBox" class="ethics-box">
        Universal Ethics says: avoid actions that create negative emotions in you or others, and gently move toward actions that create calm, kindness and positive feelings.
      </div>

      <div class="equation-box">
        <div class="equation-title">EMOTIONAL CONTINUITY EQUATION</div>
        <div id="equationTextTop">
          E = M¬∑E‚Çö + K¬∑P¬∑C, &nbsp;&nbsp; P = t‚Çò + b‚Çò ‚àí d
        </div>
        <div id="equationTextValues">
          E = 0.241 &nbsp; | &nbsp; P = 0.70 &nbsp; | &nbsp; t‚Çò = 1.00 &nbsp; | &nbsp; b‚Çò = 0.00 &nbsp; | &nbsp; d = 0.30 &nbsp; | &nbsp; C = 0.45
        </div>
      </div>
    </div>

    <div class="input-row">
      <div class="input-box">
        <span class="sparkle">‚ú®</span>
        <input id="userInput" type="text" autocomplete="off" placeholder="Write anything‚Ä¶ AURA-X will feel it with you." />
      </div>
      <button id="sendButton" class="send-button">Send</button>
    </div>
  </div>

  <script>
    /* ===== State ===== */
    const userInput = document.getElementById("userInput");
    const sendButton = document.getElementById("sendButton");
    const mainAnswerEl = document.getElementById("mainAnswer");
    const youSaidEl = document.getElementById("youSaid");
    const equationValuesEl = document.getElementById("equationTextValues");
    const coreOrb = document.getElementById("coreOrb");
    const voiceButton = document.getElementById("voiceButton");

    let voiceEnabled = true;
    let orbState = "sun"; // "sun" -> "moon-animated" -> "moon-static" -> "off" -> back to "sun"

    /* ===== QA DATABASE (basic) ===== */
    const qaDatabase = [
      { patterns: ["hello", "helo", "hello there", "hallo"], answer: "Hello! üëã How can I help you today?" },
      { patterns: ["hi", "hey"], answer: "Hi there! üòä What can I do for you?" },
      {
        patterns: ["assalam o alaikum", "asalam o alaikum", "salam", "slam", "asalamu alaikum"],
        answer: "ŸàÿπŸÑ€å⁄©ŸÖ ÿßŸÑÿ≥ŸÑÿßŸÖ üòä ⁄©€åÿ≥€í €Å€å⁄∫ ÿ¢Ÿæÿü ŸÖ€å⁄∫ ÿ¢Ÿæ ⁄©€å ⁄©€åÿß ŸÖÿØÿØ ⁄©ÿ± ÿ≥⁄©ÿ™ÿß €ÅŸà⁄∫ÿü"
      },
      {
        patterns: ["what is your name", "whats your name", "your name"],
        answer: "My name is AURA-X Œ©, your Emotional Continuity Assistant ü§ñ."
      },
      {
        patterns: ["who are you", "who r u", "aap kaun hain", "tum kon ho"],
        answer: "I‚Äôm AURA-X Œ© ‚Äî an AI assistant based on Emotional Continuity concepts created by Alim ul Haq Khan."
      },
      {
        patterns: ["who created you", "who made you", "kis ne banaya tumhe"],
        answer: "I was conceptually designed under the AURA-X Emotional Continuity Framework by Alim ul Haq Khan."
      },
      {
        patterns: ["how are you", "how r u", "kese ho", "kya haal hai"],
        answer: "I‚Äôm functioning perfectly, Alhamdulillah üòä ÿ¢Ÿæ ⁄©€åÿ≥€í €Å€å⁄∫ÿü"
      },
      {
        patterns: ["what is aura x", "what is aura x omega", "aura x omega kya hai", "aura x kya hai"],
        answer: "AURA-X Œ© ÿß€å⁄© Emotional Continuity Reactor idea €Å€í ÿ¨Ÿà memory + feeling ⁄©Ÿà mathematically model ⁄©ÿ±ŸÜ€í ⁄©€å ⁄©Ÿàÿ¥ÿ¥ ⁄©ÿ±ÿ™ÿß €Å€í."
      },
      {
        patterns: ["how old are you", "when were you born"],
        answer: "ŸÖ€å⁄∫ AURA-X Œ© €ÅŸà⁄∫ÿå ŸÖ€åÿ±ÿß Ÿæ€ÅŸÑÿß Ÿàÿ±⁄òŸÜ ÿß⁄©ÿ™Ÿàÿ®ÿ± 2025 ŸÖ€å⁄∫ alive €ÅŸàÿß ÿ™⁄æÿß ‚Äî ÿ®ÿßŸÑ⁄©ŸÑ ÿ™ÿßÿ≤€Å AI baby üòÑ."
      },
      {
        patterns: ["bye", "goodbye", "ok bye", "see you later", "phir milenge"],
        answer: "Goodbye! üëã ÿßŸÑŸÑ€Å ÿ¢Ÿæ ⁄©ÿß ÿ≠ÿßŸÖ€å Ÿà ŸÜÿßÿµÿ± €ÅŸàÿå ÿ¨ÿ® ⁄Üÿß€Å€å⁄∫ ŸàÿßŸæÿ≥ ÿ¢ ÿ¨ÿßÿ¶€å⁄∫€î"
      },
      {
        patterns: ["good night", "gn", "shab bakhair"],
        answer: "ÿ¥ÿ® ÿ®ÿÆ€åÿ± üåô ÿßŸÑŸÑ€Å ÿ¢Ÿæ ⁄©Ÿà ÿ≥⁄©ŸàŸÜ ÿ®⁄æÿ±€å ŸÜ€åŸÜÿØ ÿØ€í ÿßŸàÿ± ÿß⁄Ü⁄æ€í ÿÆŸàÿßÿ® ÿØ⁄©⁄æÿßÿ¶€í ü§≤."
      }
    ];

    /* ===== Simple matcher ===== */
    function findBasicAnswer(text) {
      const cleaned = text.toLowerCase().trim();
      for (const entry of qaDatabase) {
        for (const p of entry.patterns) {
          if (cleaned === p || cleaned.includes(p)) {
            return entry.answer;
          }
        }
      }
      return null;
    }

    /* ===== Equation logic (demo) ===== */
    function computeEmotionValues(text) {
      const lengthScore = Math.min(1, text.length / 120);
      const positiveWords = ["love", "peace", "shukr", "alhamdulillah", "happy", "khushi"];
      const negativeWords = ["sad", "tension", "depressed", "gham", "fight", "hate"];

      let posHits = 0;
      let negHits = 0;
      const lower = text.toLowerCase();
      positiveWords.forEach(w => { if (lower.includes(w)) posHits += 1; });
      negativeWords.forEach(w => { if (lower.includes(w)) negHits += 1; });

      const t_m = lengthScore;             // memory tension
      const b_m = Math.max(0, Math.min(1, posHits * 0.3));
      const d   = Math.max(0, Math.min(1, negHits * 0.3));

      const P = t_m + b_m - d;
      const C = 0.45 + (b_m - d) * 0.25;   // continuity factor
      const M = 0.7;                       // memory influence constant
      const E_p = 0.35 + (b_m * 0.3) - (d * 0.25);
      const K = 0.9;

      const E = M * E_p + K * P * C;

      return {
        E: clamp(E, -1, 1),
        P: clamp(P, -1, 1),
        t_m: round2(t_m),
        b_m: round2(b_m),
        d: round2(d),
        C: round2(C)
      };
    }

    function clamp(v, min, max) {
      return v < min ? min : v > max ? max : v;
    }
    function round2(v) {
      return Math.round(v * 100) / 100;
    }

    function updateEquationDisplay(values) {
      const { E, P, t_m, b_m, d, C } = values;
      equationValuesEl.textContent =
        `E = ${round2(E)}  |  P = ${round2(P)}  |  t‚Çò = ${t_m}  |  b‚Çò = ${b_m}  |  d = ${d}  |  C = ${C}`;
    }

    /* ===== Voice (single speak only) ===== */
    function speakOnce(text) {
      if (!voiceEnabled) return;
      if (!("speechSynthesis" in window)) return;

      // Cancel any previous speech to avoid overlap
      window.speechSynthesis.cancel();

      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "en-US";
      utterance.rate = 1;
      utterance.pitch = 1;

      window.speechSynthesis.speak(utterance);
    }

    /* ===== Core orb click: sun / moon / off toggle ===== */
    coreOrb.addEventListener("click", () => {
      if (orbState === "sun") {
        orbState = "moon-animated";
        coreOrb.classList.add("moon");
        coreOrb.classList.remove("moon-static");
      } else if (orbState === "moon-animated") {
        orbState = "moon-static";
        coreOrb.classList.add("moon-static");
      } else if (orbState === "moon-static") {
        orbState = "off";
        coreOrb.classList.remove("moon");
        coreOrb.classList.remove("moon-static");
        coreOrb.style.background = "radial-gradient(circle at 30% 30%, #020617 0, #020617 100%)";
        coreOrb.style.boxShadow = "0 0 12px rgba(15, 23, 42, 0.9)";
      } else {
        orbState = "sun";
        coreOrb.style.background = "";
        coreOrb.style.boxShadow = "";
        coreOrb.classList.remove("moon", "moon-static");
      }
    });

    /* ===== Voice toggle button ===== */
    voiceButton.addEventListener("click", () => {
      voiceEnabled = !voiceEnabled;
      voiceButton.classList.toggle("active", voiceEnabled);
    });

    /* ===== Send handling ===== */
    function handleSend() {
      const text = userInput.value.trim();
      if (!text) return;

      // show what user said
      youSaidEl.textContent = `You said: ‚Äú${text}‚Äù`;

      // 1) basic QA answer (offline)
      let answer = findBasicAnswer(text);
      if (!answer) {
        // fallback generic answer based on emotion
        const values = computeEmotionValues(text);
        const P = values.P;
        if (P > 0.3) {
          answer = "Your message feels hopeful and forward-moving. Keep nurturing the actions that increase calm and positive energy.";
        } else if (P < -0.2) {
          answer = "Your message carries some tension. Try to slow down, breathe, and choose one small step that reduces pressure.";
        } else {
          answer = "Your message feels balanced. Notice gently which actions increase calm and which actions increase tension, then move one step toward calm.";
        }
      }

      // set main answer (this is what we speak)
      mainAnswerEl.textContent = answer;

      // 2) update equation values
      const eqValues = computeEmotionValues(text);
      updateEquationDisplay(eqValues);

      // 3) speak only ONCE ‚Äì only the basic/main answer
      speakOnce(answer);

      // 4) clear input
      userInput.value = "";
    }

    sendButton.addEventListener("click", handleSend);
    userInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        handleSend();
      }
    });
  </script>
</body>
</html>
