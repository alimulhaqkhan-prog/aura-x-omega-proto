<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>AURA-X ‚Ä¢ Emotional Resonance (Live Glow)</title>
<style>
  :root{
    --bg:#0b1220;
    --card:#142136;
    --card-2:#0e182b;
    --text:#e7f0ff;
    --muted:#a8b5cc;
    --accent:#2ea8ff;
    --radius:18px;
  }
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
  html,body{height:100%}
  body{
    margin:0;
    font-family:ui-rounded,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
    color:var(--text);
    background:#000; /* will be replaced by JS radial */
    overflow-x:hidden;
  }

  /* ---- Pulse glow layer (behind everything) ---- */
  .pulse-glow{
    position:fixed;
    inset:0;
    z-index:-2;
    background:radial-gradient(circle at 50% 40%, #31a8ff33 0%, transparent 70%);
    opacity:.85;
    animation:pulse 6s ease-in-out infinite;
    transition:background 1000ms ease, opacity 600ms ease;
    pointer-events:none;
  }
  @keyframes pulse{
    0%{opacity:.55; transform:scale(1)}
    50%{opacity:.95; transform:scale(1.04)}
    100%{opacity:.55; transform:scale(1)}
  }

  /* subtle vignette glow around chat area */
  .aura-glow{
    position:fixed; inset:0;
    z-index:-1;
    background:radial-gradient(closest-side, #31a8ff44, #0000 70%);
    filter:blur(22px);
    transition:background 900ms ease;
    pointer-events:none;
  }

  .wrap{min-height:100%; display:flex; flex-direction:column}
  header{
    padding:18px 18px 4px;
    text-align:center;
    opacity:.9;
    font-weight:600;
  }
  .badge{
    display:inline-flex; gap:8px; align-items:center;
    padding:6px 12px; border-radius:999px;
    background:#ffffff14; color:#cfe6ff; font-size:12px;
    border:1px solid #ffffff18
  }

  .chat{
    width:100%;
    max-width:880px;
    margin:0 auto;
    padding:10px 14px 90px;
  }
  .bubble{
    background:var(--card);
    border:1px solid #ffffff12;
    box-shadow:0 10px 30px #00000055 inset, 0 10px 22px #00000030;
    border-radius:var(--radius);
    padding:16px 18px;
    margin:12px 0;
    line-height:1.45;
  }
  .user{background:#112035; border-color:#ffffff10}
  .bot-title{font-weight:700; margin-bottom:6px}
  .muted{color:var(--muted)}
  .echo{opacity:.9; font-style:italic}

  /* ---- input bar (left cut-off fix) ---- */
  .composer{
    position:fixed; left:0; right:0; bottom:0;
    padding:10px 12px 16px;
    background:linear-gradient(to top, #060a13 55%, transparent);
    backdrop-filter:saturate(120%) blur(2px);
  }
  .composer-inner{
    max-width:880px; margin:0 auto;
    display:flex; gap:10px; align-items:center;
  }
  input[type=text]{
    flex:1; min-height:46px;
    padding:12px 14px;           /* LHS padding so ÿ≠ÿ±ŸÅŸê ÿßŸàŸëŸÑ ⁄©Ÿπÿß ŸÜ€Å €ÅŸà */
    border-radius:14px;
    background:#0f1a2c;
    color:var(--text);
    border:1px solid #ffffff18;
    outline:none;
    font-size:16px;
  }
  input::placeholder{color:#7f93b3}
  button{
    height:46px; padding:0 18px;
    border:none; border-radius:12px;
    background:linear-gradient(180deg,#32b3ff,#1493ee);
    color:white; font-weight:700; letter-spacing:.2px;
    box-shadow:0 10px 18px #1190ee55;
  }

  /* small screens spacing */
  @media (max-width:420px){
    .chat{padding-bottom:96px}
    .bubble{padding:14px 14px}
  }
</style>
</head>
<body>
  <div class="pulse-glow" id="pulse"></div>
  <div class="aura-glow"  id="glow"></div>

  <div class="wrap">
    <header>
      <span class="badge"><span>Œ© AURA-X</span> ‚Ä¢ <span id="badge">calm</span></span>
    </header>

    <main class="chat" id="chat">
      <div class="bubble">
        üëã Hello! I‚Äôm AURA-X ‚Äî your emotional resonance prototype.  
        Tell me how you feel today.
      </div>
    </main>

    <div class="composer">
      <div class="composer-inner">
        <input id="inp" type="text" inputmode="text" autocomplete="off"
               placeholder="Type your emotion or thought‚Ä¶" />
        <button id="send">Send</button>
      </div>
    </div>
  </div>

<script>
/* ---------- Color helpers ---------- */
const COLORS = {
  joy:      "#ffd648",
  sadness:  "#3aa4ff",
  anger:    "#ff4d5a",
  fear:     "#9b6bff",
  calm:     "#26d4a8",
  confused: "#b8c5ff"
};
const hexA = (hex, a=0.28) => {
  const h = hex.replace("#","");
  const r = parseInt(h.slice(0,2),16),
        g = parseInt(h.slice(2,4),16),
        b = parseInt(h.slice(4,6),16);
  return `rgba(${r},${g},${b},${a})`;
};

/* ---------- DOM ---------- */
const chat  = document.getElementById("chat");
const inp   = document.getElementById("inp");
const send  = document.getElementById("send");
const glow  = document.getElementById("glow");
const pulse = document.getElementById("pulse");
const badge = document.getElementById("badge");

/* ---------- Initialize background ---------- */
document.body.style.backgroundImage =
  `radial-gradient(1100px 650px at 50% -8%, ${hexA(COLORS.calm,0.22)} 0%, #000 58%)`;

/* ---------- Emotion rules (simple on-device) ---------- */
const RULES = [
  {emo:"joy",     kw:["happy","excited","hope","love","great","alhamdulillah","shukar","good"]},
  {emo:"sadness", kw:["sad","cry","upset","hurt","empty","alone","tired"]},
  {emo:"anger",   kw:["angry","mad","furious","rage","hate"]},
  {emo:"fear",    kw:["afraid","scared","worry","anxious","anxiety","confused","panic"]},
  {emo:"calm",    kw:["calm","ok","fine","sabr","relaxed","breathe"]},
];

/* ---------- Continuity smoothing ---------- */
let last = "calm";
function detectEmotion(text){
  const t = text.toLowerCase();
